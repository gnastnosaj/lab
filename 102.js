(self.webpackChunklab=self.webpackChunklab||[]).push([[102],{2102:(ae,be,H)=>{"use strict";H.r(be),H.d(be,{Cognitive:()=>Ee});var Me=H(2488),wt=H(3252),M=H(7696),u=H(2700),pe=H(9212),Y=H(4704),me=H(9216);const ee=()=>{},se=window;class t{constructor(d){this.state=0,this.buffer=[],this.dataSize=0,this.options=Object.assign({type:"wav",bitRate:16,sampleRate:16e3,bufferSize:8192,onProcess:ee},d)}isOpen(){if(this.stream){const d=this.stream.getTracks();if(d.length>0)return"live"===d[0].readyState}return!1}open(d,f){if(d=d||ee,f=f||ee,this.isOpen())return void d();const m=":( not support.";let g=se.AudioContext;if(g||(g=se.webkitAudioContext),!g)return void f(m);let w=navigator.mediaDevices||{};if(w.getUserMedia||(w=navigator,w.getUserMedia||(w.getUserMedia=w.webkitGetUserMedia||w.mozGetUserMedia||w.msGetUserMedia)),!w.getUserMedia)return void f(m);this.audioContext=this.audioContext||new g;const T=I=>{this.stream=I,d()},b=I=>{let v=I.name||I.code||"";v=/Permission/i.test(v)?"permission denied":`get user media error: ${v}`,f(v)},R=w.getUserMedia({audio:!0},T,b);R&&R.then&&R.then(T).catch(b)}close(d){d=d||ee,this.stop(),this.stream&&this.stream.getTracks().forEach(m=>m.stop()),this.stream=null,d()}record(){if(this.state=0,this.buffer=[],this.dataSize=0,!this.isOpen())return;let d;this.media=this.audioContext.createMediaStreamSource(this.stream),this.process=(this.audioContext.createScriptProcessor||this.audioContext.createJavaScriptNode).call(this.audioContext,this.options.bufferSize,1,1),this.process.onaudioprocess=f=>{if(1!==this.state)return;const m=f.inputBuffer.getChannelData(0),g=m.length;this.dataSize+=g;const w=new Int16Array(g);let T=0;for(let I=0;I<g;I++){let v=Math.max(-1,Math.min(1,m[I]));v=v<0?32768*v:32767*v,w[I]=v,T+=Math.abs(v)}this.buffer.push(w),T/=g;let b=0;T>0&&(b=Math.round(Math.max(0,100*(20*Math.log10(T/32767)+34)/34)));const R=Math.round(this.dataSize/this.audioContext.sampleRate*1e3);clearTimeout(d),d=setTimeout(()=>{this.options.onProcess(this.buffer,b,R)})},this.media.connect(this.process),this.process.connect(this.audioContext.destination),this.state=1}save(d,f){if(d=d||ee,f=f||ee,!this.state)return void f("not recording.");if(this.stop(),!this.dataSize)return void f("no data.");const m=new Int16Array(this.dataSize);let g=0;for(const T of this.buffer)m.set(T,g),g+=T.length;const w=Math.round(this.dataSize/this.audioContext.sampleRate*1e3);setTimeout(()=>{this[this.options.type](m,T=>{d(T,w)})})}stop(){this.state&&(this.state=0,this.media.disconnect(),this.process.disconnect())}pause(){this.state&&(this.state=2)}resume(){this.state&&(this.state=1)}wav(d,f){const m=Math.round(this.audioContext.sampleRate/this.options.sampleRate);if(m>1){this.dataSize=Math.floor(this.dataSize/m);const x=new Int16Array(this.dataSize);let N=0,B=0;for(;N<this.dataSize;)x[N]=d[B],B+=m,N++;d=x}else this.options.sampleRate=this.audioContext.sampleRate;const g=this.dataSize*(this.options.bitRate/8),w=new ArrayBuffer(44+g),T=new DataView(w);let b=0;const R=x=>{for(let N=0;N<x.length;N++,b++)T.setUint8(b,x.charCodeAt(N))},I=x=>{T.setUint16(b,x,!0),b+=2},v=x=>{T.setUint32(b,x,!0),b+=4};if(R("RIFF"),v(36+g),R("WAVE"),R("fmt "),v(16),I(1),I(1),v(this.options.sampleRate),v(this.options.sampleRate*(this.options.bitRate/8)),I(this.options.bitRate/8),I(this.options.bitRate),R("data"),v(g),8===this.options.bitRate)for(let x=0;x<this.dataSize;x++,b++){let N=d[x];N=Math.trunc(255/(65535/(N+32768))),T.setInt8(b,N)}else for(let x=0;x<this.dataSize;x++,b+=2)T.setInt16(b,d[x],!0);f(new Blob([T],{type:"audio/wav"}))}}var Ae=H(1904),O=H.n(Ae),D=H(9144),S=H(4496),He=H(2356),J=H(460);const U=["play"];let ge=(()=>{class z{constructor(f){this.rxbus=f,this.recording=!1}ngOnInit(){}ngAfterViewInit(){const f=new(O())(this.play.nativeElement);f.on("press",()=>this.startRecording()),f.on("pressup",()=>this.stopRecording())}startRecording(){this.recording||(this.recording=!0,this.recordSubscription=this.cognitive.record(f=>{this.cognitive.iat(f).pipe((0,Y.k)(m=>JSON.parse(m)),(0,Y.k)(m=>{switch(this.rxbus.post(m.tag,m.payload),m.tag){case"magneto":return"\u6b63\u5728\u641c\u7d22\uff0c\u8bf7\u7a0d\u5019\u3002";case"voice-changer":return m.payload.keyword;default:return null}}),(0,D.a)(()=>(0,u.of)("\u4e0d\u597d\u610f\u601d\uff0c\u6ca1\u542c\u6e05\u5462\uff0c\u8bf7\u518d\u8bd5\u4e00\u6b21\u54df\u3002"))).subscribe(m=>{m&&this.cognitive.tts(m).subscribe(g=>{this.rxbus.post("cognitive",{text:m,audio:g,date:new Date}),this.cognitive.play(g)})})}).subscribe())}stopRecording(){this.recording&&(null!=this.recordSubscription&&!this.recordSubscription.closed&&this.recordSubscription.unsubscribe(),this.recording=!1)}static#e=this.\u0275fac=function(m){return new(m||z)(S.GI1(He.I))};static#t=this.\u0275cmp=S.In1({type:z,selectors:[["app-cognitive"]],viewQuery:function(m,g){if(1&m&&S.CC$(U,5),2&m){let w;S.wto(w=S.Gqi())&&(g.play=w.first)}},decls:3,vars:1,consts:[["path","assets/lottie/voice.json",3,"play"],["play",""]],template:function(m,g){1&m&&S.wR5(0,"app-lottie",0)(1,"div",null,1),2&m&&S.E7m("play",g.recording)},dependencies:[J.o],styles:["[_nghost-%COMP%]{position:relative}div[_ngcontent-%COMP%]{position:absolute;inset:0;cursor:pointer!important}"]})}return z})();var L=H(7048),Oe=H(68);let Ee=(()=>{class z{constructor(f,m,g,w){this.rxbus=f,this.ngZone=m,this.http=g,this.overlay=w,this.cache={}}attach(){if(null==this.overlayRef){this.overlayRef=this.overlay.create({width:120,height:120});const f=this.overlay.position().global();f.right("0px"),f.bottom("0px"),this.overlayRef.updatePositionStrategy(f);const m=new Me.KC(ge);this.overlayRef.attach(m).instance.cognitive=this}}dettach(){null!=this.overlayRef&&(this.overlayRef.detach(),this.overlayRef.dispose(),this.overlayRef=null)}record(f,m){return m?this.tts(m).pipe((0,pe.y)(g=>{const w=new FileReader;w.onload=()=>{f(w.result)},w.readAsArrayBuffer(g)})):new wt._(g=>{const w=new t({type:"wav",bitRate:16,sampleRate:16e3});return w.open(()=>{w.record()},T=>g.error(T)),g.next(w),{unsubscribe:()=>{w.save(T=>{const b=new FileReader;b.onload=()=>{f(b.result)},b.readAsArrayBuffer(T),w.close()},T=>{console.error(T),w.close()})}}})}play(f){me.soundManager.createSound({url:URL.createObjectURL(f),onload(){this.play()}}).load()}load(f){me.soundManager.createSound({url:f,onload(){this.play()}}).load()}iat(f){const m=new FormData;return m.append("file",new File([f],"todo.wav",{type:"audio/wav",lastModified:Date.now()})),this.http.post("https://ai.jasontsang.dev:4096/asr",m).pipe((0,Y.k)(g=>{if(g?.text){const w=window.location.hash.replace("#/","");return JSON.stringify({tag:w,payload:{keyword:g.text}})}throw M.G}))}source(f,m="\u6d3e\u8499\uff08\u591a\u60c5\u611f\u6d4b\u8bd5\uff09"){return`https://ai.jasontsang.dev:4096/tts?cha_name=${encodeURIComponent(m)}&text=${encodeURIComponent(f)}`}tts(f,m="\u6d3e\u8499\uff08\u591a\u60c5\u611f\u6d4b\u8bd5\uff09"){return this.cache[f]?(0,u.of)(this.cache[f]):this.http.get(this.source(f,m),{responseType:"blob"}).pipe((0,Y.k)(g=>new Blob([g],{type:"audio/wav"})),(0,pe.y)(g=>this.cache[f]=g))}static#e=this.\u0275fac=function(m){return new(m||z)(S.CoB(He.I),S.CoB(S.WW2),S.CoB(L.KK),S.CoB(Oe.mc))};static#t=this.\u0275prov=S.wxM({token:z,factory:z.\u0275fac,providedIn:"root"})}return z})()},9216:(ae,be,H)=>{var Me;ae=H.nmd(ae),function(M,u){"use strict";if(!M||!M.document)throw new Error("SoundManager requires a browser with window and document objects.");var pe=null;function Y(me,ee){this.setupOptions={url:me||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onerror:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,playbackRate:1,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={onfailure:null,isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1},flac:{type:["audio/flac"],required:!1}},this.movieID="sm2-container",this.id=ee||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20170601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var se,J,Oe,Ee,z,d,g,v,N,B,$e,bt,Je,de,ye,_e,Mt,Qe,Xe,Ze,te,Ie,he,Ye,Se,xe,ke,ve,Ot,et,tt,it,Tt,P,ot,we,Q,Dt,Ue,Ne,re,E,Pt,Ft,Ct,je,Pe,Rt,We,Fe,At,ue,ze,st,Ht,W,rt,oe,lt,It,ne,xt,ut,Ce,ft,t=this,Ae=null,O=null,D="soundManager",S=D+": ",U=navigator.userAgent,ge=M.location.href.toString(),L=document,f=[],m=!0,w=!1,T=!1,b=!1,R=!1,I=!1,x=0,St=["log","info","warn","error"],Le=null,at=null,Te=!1,nt=!1,Be=0,De=null,le=[],q=null,Et=Array.prototype.slice,G=!1,kt=0,V=1e3,dt=U.match(/(ipad|iphone|ipod)/i),ht=U.match(/android/i),fe=U.match(/msie|trident/i),zt=U.match(/webkit/i),Ve=U.match(/safari/i)&&!U.match(/chrome/i),ct=U.match(/opera/i),Ke=U.match(/(mobile|pre\/|xoom)/i)||dt||ht,pt=!ge.match(/usehtml5audio/i)&&!ge.match(/sm2-ignorebadua/i)&&Ve&&!U.match(/silk/i)&&U.match(/OS\sX\s10_6_([3-7])/i),mt=M.console!==u&&console.log!==u,gt=L.hasFocus!==u?L.hasFocus():null,qe=Ve&&(L.hasFocus===u||!L.hasFocus()),Ut=!qe,Nt=/(mp3|mp4|mpa|m4a|m4b)/i,yt="about:blank",Re=L.location?L.location.protocol.match(/http/i):null,Kt=Re?"":"//",Bt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,jt=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],qt=new RegExp("\\.("+jt.join("|")+")(\\?.*)?$","i");function Ge(i){return t.preferFlash&&oe&&!t.ignoreFlash&&t.flash[i]!==u&&t.flash[i]}function j(i){return function(e){var r,a=this._s;return a&&a._a?r=i.call(this,e):(t._wD(a&&a.id?a.id+": Ignoring "+e.type:"HTML5::Ignoring "+e.type),r=null),r}}this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Re,Q={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},At=[null,"MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"],this.hasHTML5=function(){try{return Audio!==u&&(ct&&opera!==u&&opera.version()<10?new Audio(null):new Audio).canPlayType!==u}catch{return!1}}(),this.setup=function(i){var e=!t.url;return i!==u&&b&&q&&t.ok()&&(i.flashVersion!==u||i.url!==u||i.html5Test!==u)&&re(P("setupLate")),$e(i),G||(Ke?(!t.setupOptions.ignoreMobileRestrictions||t.setupOptions.forceUseGlobalHTML5Audio)&&(le.push(te.globalHTML5),G=!0):t.setupOptions.forceUseGlobalHTML5Audio&&(le.push(te.globalHTML5),G=!0)),!ft&&Ke&&(t.setupOptions.ignoreMobileRestrictions?le.push(te.ignoreMobile):((!t.setupOptions.useHTML5Audio||t.setupOptions.preferFlash)&&t._wD(te.mobileUA),t.setupOptions.useHTML5Audio=!0,t.setupOptions.preferFlash=!1,dt?t.ignoreFlash=!0:(ht&&!U.match(/android\s2\.3/i)||!ht)&&(t._wD(te.globalHTML5),G=!0))),i&&(e&&Se&&i.url!==u&&t.beginDelayedInit(),!Se&&i.url!==u&&"complete"===L.readyState&&setTimeout(he,1)),ft=!0,t},this.ok=function(){return q?b&&!R:t.useHTML5Audio&&t.hasHTML5},this.supported=this.ok,this.getMovie=function(i){return J(i)||L[i]||M[i]},this.createSound=function(i,e){var a,r,n,h=null;if(r=(a=D+".createSound(): ")+P(b?"notOK":"notReady"),!b||!t.ok())return re(r),!1;if(e!==u&&(i={id:i,url:e}),(n=B(i)).url=je(n.url),n.id===u&&(n.id=t.setupOptions.idPrefix+kt++),n.id.toString().charAt(0).match(/^[0-9]$/)&&t._wD(a+P("badID",n.id),2),t._wD(a+n.id+(n.url?" ("+n.url+")":""),1),E(n.id,!0))return t._wD(a+n.id+" exists",1),t.sounds[n.id];function p(){return n=Ue(n),t.sounds[n.id]=new se(n),t.soundIDs.push(n.id),t.sounds[n.id]}if(We(n))h=p(),t.html5Only||t._wD(n.id+": Using HTML5"),h._setup_html5(n);else{if(t.html5Only)return t._wD(n.id+": No HTML5 support for this sound, and no Flash. Exiting."),p();if(t.html5.usingFlash&&n.url&&n.url.match(/data:/i))return t._wD(n.id+": data: URIs not supported via Flash. Exiting."),p();d>8&&(null===n.isMovieStar&&(n.isMovieStar=!!(n.serverURL||n.type&&n.type.match(Bt)||n.url&&n.url.match(qt))),n.isMovieStar&&(t._wD(a+"using MovieStar handling"),n.loops>1&&v("noNSLoop"))),n=Ne(n,a),h=p(),8===d?O._createSound(n.id,n.loops||1,n.usePolicyFile):(O._createSound(n.id,n.url,n.usePeakData,n.useWaveformData,n.useEQData,n.isMovieStar,!!n.isMovieStar&&n.bufferTime,n.loops||1,n.serverURL,n.duration||null,n.autoPlay,!0,n.autoLoad,n.usePolicyFile),n.serverURL||(h.connected=!0,n.onconnect&&n.onconnect.apply(h))),!n.serverURL&&(n.autoLoad||n.autoPlay)&&h.load(n)}return!n.serverURL&&n.autoPlay&&h.play(),h},this.destroySound=function(i,e){if(!E(i))return!1;var r,a=t.sounds[i];for(a.stop(),a._iO={},a.unload(),r=0;r<t.soundIDs.length;r++)if(t.soundIDs[r]===i){t.soundIDs.splice(r,1);break}return e||a.destruct(!0),a=null,delete t.sounds[i],!0},this.load=function(i,e){return!!E(i)&&t.sounds[i].load(e)},this.unload=function(i){return!!E(i)&&t.sounds[i].unload()},this.onPosition=function(i,e,a,r){return!!E(i)&&t.sounds[i].onposition(e,a,r)},this.onposition=this.onPosition,this.clearOnPosition=function(i,e,a){return!!E(i)&&t.sounds[i].clearOnPosition(e,a)},this.play=function(i,e){var a=null,r=e&&!(e instanceof Object);if(!b||!t.ok())return re(D+".play(): "+P(b?"notOK":"notReady")),!1;if(E(i,r))r&&(e={url:e});else{if(!r)return!1;r&&(e={url:e}),e&&e.url&&(t._wD(D+'.play(): Attempting to create "'+i+'"',1),e.id=i,a=t.createSound(e).play())}return null===a&&(a=t.sounds[i].play(e)),a},this.start=this.play,this.setPlaybackRate=function(i,e,a){return!!E(i)&&t.sounds[i].setPlaybackRate(e,a)},this.setPosition=function(i,e){return!!E(i)&&t.sounds[i].setPosition(e)},this.stop=function(i){return!!E(i)&&(t._wD(D+".stop("+i+")",1),t.sounds[i].stop())},this.stopAll=function(){var i;for(i in t._wD(D+".stopAll()",1),t.sounds)t.sounds.hasOwnProperty(i)&&t.sounds[i].stop()},this.pause=function(i){return!!E(i)&&t.sounds[i].pause()},this.pauseAll=function(){var i;for(i=t.soundIDs.length-1;i>=0;i--)t.sounds[t.soundIDs[i]].pause()},this.resume=function(i){return!!E(i)&&t.sounds[i].resume()},this.resumeAll=function(){var i;for(i=t.soundIDs.length-1;i>=0;i--)t.sounds[t.soundIDs[i]].resume()},this.togglePause=function(i){return!!E(i)&&t.sounds[i].togglePause()},this.setPan=function(i,e){return!!E(i)&&t.sounds[i].setPan(e)},this.setVolume=function(i,e){var a,r;if(i!==u&&!isNaN(i)&&e===u){for(a=0,r=t.soundIDs.length;a<r;a++)t.sounds[t.soundIDs[a]].setVolume(i);return!1}return!!E(i)&&t.sounds[i].setVolume(e)},this.mute=function(i){var e=0;if(i instanceof String&&(i=null),i)return!!E(i)&&(t._wD(D+'.mute(): Muting "'+i+'"'),t.sounds[i].mute());for(t._wD(D+".mute(): Muting all sounds"),e=t.soundIDs.length-1;e>=0;e--)t.sounds[t.soundIDs[e]].mute();return t.muted=!0,!0},this.muteAll=function(){t.mute()},this.unmute=function(i){var e;if(i instanceof String&&(i=null),i)return!!E(i)&&(t._wD(D+'.unmute(): Unmuting "'+i+'"'),t.sounds[i].unmute());for(t._wD(D+".unmute(): Unmuting all sounds"),e=t.soundIDs.length-1;e>=0;e--)t.sounds[t.soundIDs[e]].unmute();return t.muted=!1,!0},this.unmuteAll=function(){t.unmute()},this.toggleMute=function(i){return!!E(i)&&t.sounds[i].toggleMute()},this.getMemoryUse=function(){var i=0;return O&&8!==d&&(i=parseInt(O._getMemoryUse(),10)),i},this.disable=function(i){var e;if(i===u&&(i=!1),R)return!1;for(R=!0,v("shutdown",1),e=t.soundIDs.length-1;e>=0;e--)tt(t.sounds[t.soundIDs[e]]);return tt(t),N(i),W.remove(M,"load",ye),!0},this.canPlayMIME=function(i){var e;return t.hasHTML5&&(e=Fe({type:i})),!e&&q&&(e=i&&t.ok()?!!(d>8&&i.match(Bt)||i.match(t.mimePattern)):null),e},this.canPlayURL=function(i){var e;return t.hasHTML5&&(e=Fe({url:i})),!e&&q&&(e=i&&t.ok()?!!i.match(t.filePattern):null),e},this.canPlayLink=function(i){return!(i.type===u||!i.type||!t.canPlayMIME(i.type))||t.canPlayURL(i.href)},this.getSoundById=function(i,e){if(!i)return null;var a=t.sounds[i];return!a&&!e&&t._wD(D+'.getSoundById(): Sound "'+i+'" not found.',2),a},this.onready=function(i,e){var a="onready";if("function"!=typeof i)throw P("needFunction",a);return b&&t._wD(P("queue",a)),e||(e=M),Je(a,i,e),de(),!0},this.ontimeout=function(i,e){var a="ontimeout";if("function"!=typeof i)throw P("needFunction",a);return b&&t._wD(P("queue",a)),e||(e=M),Je(a,i,e),de({type:a}),!0},this._writeDebug=function(i,e){var r,n;return!(!t.setupOptions.debugMode||!(mt&&t.useConsole&&(e&&"object"==typeof e?console.log(i,e):St[e]!==u?console[St[e]](i):console.log(i),t.consoleOnly))&&(!(r=J("soundmanager-debug"))||(n=L.createElement("div"),++x%2==0&&(n.className="sm2-alt"),e=e===u?0:parseInt(e,10),n.appendChild(L.createTextNode(i)),e&&(e>=2&&(n.style.fontWeight="bold"),3===e&&(n.style.color="#ff3333")),r.insertBefore(n,r.firstChild),r=null,0)))},-1!==ge.indexOf("sm2-debug=alert")&&(this._writeDebug=function(i){M.alert(i)}),this._wD=this._writeDebug,this._debug=function(){var i,e;for(v("currentObj",1),i=0,e=t.soundIDs.length;i<e;i++)t.sounds[t.soundIDs[i]]._debug()},this.reboot=function(i,e){var a,r,n;for(t.soundIDs.length&&t._wD("Destroying "+t.soundIDs.length+" SMSound object"+(1!==t.soundIDs.length?"s":"")+"..."),a=t.soundIDs.length-1;a>=0;a--)t.sounds[t.soundIDs[a]].destruct();if(O)try{fe&&(at=O.innerHTML),Le=O.parentNode.removeChild(O)}catch{v("badRemove",2)}if(at=Le=q=O=null,t.enabled=Se=b=Te=nt=w=T=R=G=t.swfLoaded=!1,t.soundIDs=[],t.sounds={},kt=0,ft=!1,i)f=[];else for(a in f)if(f.hasOwnProperty(a))for(r=0,n=f[a].length;r<n;r++)f[a][r].fired=!1;return e||t._wD(D+": Rebooting..."),t.html5={usingFlash:null},t.flash={},t.html5Only=!1,t.ignoreFlash=!1,M.setTimeout(function(){e||t.beginDelayedInit()},20),t},this.reset=function(){return v("reset"),t.reboot(!0,!0)},this.getMoviePercent=function(){return O&&"PercentLoaded"in O?O.PercentLoaded():null},this.beginDelayedInit=function(){I=!0,he(),setTimeout(function(){return!nt&&(ke(),Ie(),nt=!0,!0)},20),_e()},this.destruct=function(){t._wD(D+".destruct()"),t.disable(!0)},se=function(i){var a,r,n,h,p,_,X,ce,$,Z,e=this,F=!1,C=[],A=0,ie=null;$={duration:null,time:null},this.id=i.id,this.sID=this.id,this.url=i.url,this.options=B(i),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,Z=!this.url,this.id3={},this._debug=function(){t._wD(e.id+": Merged options:",e.options)},this.load=function(o){var s;if(o!==u?e._iO=B(o,e.options):(e._iO=o=e.options,ie&&ie!==e.url&&(v("manURL"),e._iO.url=e.url,e.url=null)),e._iO.url||(e._iO.url=e.url),e._iO.url=je(e._iO.url),e.instanceOptions=e._iO,t._wD(e.id+": load ("+(s=e._iO).url+")"),!s.url&&!e.url)return t._wD(e.id+": load(): url is unassigned. Exiting.",2),e;if(!e.isHTML5&&8===d&&!e.url&&!s.autoPlay&&t._wD(e.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),s.url===e.url&&0!==e.readyState&&2!==e.readyState)return v("onURL",1),3===e.readyState&&s.onload&&Ce(e,function(){s.onload.apply(e,[!!e.duration])}),e;if(e.loaded=!1,e.readyState=1,e.playState=0,e.id3={},We(s))e._setup_html5(s)._called_load?t._wD(e.id+": Ignoring request to load again"):(e._html5_canplay=!1,e.url!==s.url&&(t._wD(v("manURL")+": "+s.url),e._a.src=s.url,e.setPosition(0)),e._a.autobuffer="auto",e._a.preload="auto",e._a._called_load=!0);else{if(t.html5Only)return t._wD(e.id+": No flash support. Exiting."),e;if(e._iO.url&&e._iO.url.match(/data:/i))return t._wD(e.id+": data: URIs not supported via Flash. Exiting."),e;try{e.isHTML5=!1,e._iO=Ne(Ue(s)),e._iO.autoPlay&&(e._iO.position||e._iO.from)&&(t._wD(e.id+": Disabling autoPlay because of non-zero offset case"),e._iO.autoPlay=!1),s=e._iO,8===d?O._load(e.id,s.url,s.stream,s.autoPlay,s.usePolicyFile):O._load(e.id,s.url,!!s.stream,!!s.autoPlay,s.loops||1,!!s.autoLoad,s.usePolicyFile)}catch{v("smError",2),g("onload",!1),ve({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return e.url=s.url,e},this.unload=function(){return 0!==e.readyState&&(t._wD(e.id+": unload()"),e.isHTML5?(h(),e._a&&(e._a.pause(),ie=ze(e._a))):8===d?O._unload(e.id,yt):O._unload(e.id),a()),e},this.destruct=function(o){t._wD(e.id+": Destruct"),e.isHTML5?(h(),e._a&&(e._a.pause(),ze(e._a),G||n(),e._a._s=null,e._a=null)):(e._iO.onfailure=null,O._destroySound(e.id)),o||t.destroySound(e.id,!0)},this.play=function(o,l){var s,y,K,k,_t,vt,Wt=!0;if(s=e.id+": play(): ",l=l===u||l,o||(o={}),e.url&&(e._iO.url=e.url),e._iO=B(e._iO,e.options),e._iO=B(o,e._iO),e._iO.url=je(e._iO.url),e.instanceOptions=e._iO,!e.isHTML5&&e._iO.serverURL&&!e.connected)return e.getAutoPlay()||(t._wD(s+" Netstream not connected yet - setting autoPlay"),e.setAutoPlay(!0)),e;if(We(e._iO)&&(e._setup_html5(e._iO),p()),1===e.playState&&!e.paused){if(!e._iO.multiShot)return t._wD(s+"Already playing (one-shot)",1),e.isHTML5&&e.setPosition(e._iO.position),e;t._wD(s+"Already playing (multi-shot)",1)}if(o.url&&o.url!==e.url&&(e.readyState||e.isHTML5||8!==d||!Z?e.load(e._iO):Z=!1),e.loaded)t._wD(s.substr(0,s.lastIndexOf(":")));else if(0===e.readyState){if(t._wD(s+"Attempting to load"),e.isHTML5||t.html5Only){if(!e.isHTML5)return t._wD(s+"Unsupported type. Exiting."),e;e.load(e._iO)}else e._iO.autoPlay=!0,e.load(e._iO);e.instanceOptions=e._iO}else{if(2===e.readyState)return t._wD(s+"Could not load - exiting",2),e;t._wD(s+"Loading - attempting to play...")}return!e.isHTML5&&9===d&&e.position>0&&e.position===e.duration&&(t._wD(s+"Sound at end, resetting to position: 0"),o.position=0),e.paused&&e.position>=0&&(!e._iO.serverURL||e.position>0)?(t._wD(s+"Resuming from paused state",1),e.resume()):(e._iO=B(o,e._iO),(!e.isHTML5&&null!==e._iO.position&&e._iO.position>0||null!==e._iO.from&&e._iO.from>0||null!==e._iO.to)&&0===e.instanceCount&&0===e.playState&&!e._iO.serverURL&&(K=function(){e._iO=B(o,e._iO),e.play(e._iO)},e.isHTML5&&!e._html5_canplay?(t._wD(s+"Beginning load for non-zero offset case"),e.load({_oncanplay:K})):!e.isHTML5&&!e.loaded&&(!e.readyState||2!==e.readyState)&&(t._wD(s+"Preloading for non-zero offset case"),e.load({onload:K})),e._iO=ce()),(!e.instanceCount||e._iO.multiShotEvents||e.isHTML5&&e._iO.multiShot&&!G||!e.isHTML5&&d>8&&!e.getAutoPlay())&&e.instanceCount++,e._iO.onposition&&0===e.playState&&_(e),e.playState=1,e.paused=!1,e.position=e._iO.position===u||isNaN(e._iO.position)?0:e._iO.position,e.isHTML5||(e._iO=Ne(Ue(e._iO))),e._iO.onplay&&l&&(e._iO.onplay.apply(e),F=!0),e.setVolume(e._iO.volume,!0),e.setPan(e._iO.pan,!0),1!==e._iO.playbackRate&&e.setPlaybackRate(e._iO.playbackRate),e.isHTML5?e.instanceCount<2?(p(),y=e._setup_html5(),e.setPosition(e._iO.position),y.play()):(t._wD(e.id+": Cloning Audio() for instance #"+e.instanceCount+"..."),k=new Audio(e._iO.url),_t=function(){W.remove(k,"ended",_t),e._onfinish(e),ze(k),k=null},vt=function(){W.remove(k,"canplay",vt);try{k.currentTime=e._iO.position/V}catch{re(e.id+": multiShot play() failed to apply position of "+e._iO.position/V)}k.play()},W.add(k,"ended",_t),e._iO.volume!==u&&(k.volume=Math.max(0,Math.min(1,e._iO.volume/100))),e.muted&&(k.muted=!0),e._iO.position?W.add(k,"canplay",vt):k.play()):(Wt=O._start(e.id,e._iO.loops||1,9===d?e.position:e.position/V,e._iO.multiShot||!1),9===d&&!Wt&&(t._wD(s+"No sound hardware, or 32-sound ceiling hit",2),e._iO.onplayerror&&e._iO.onplayerror.apply(e)))),e},this.start=this.play,this.stop=function(o){var s,l=e._iO;return 1===e.playState&&(t._wD(e.id+": stop()"),e._onbufferchange(0),e._resetOnPosition(0),e.paused=!1,e.isHTML5||(e.playState=0),X(),l.to&&e.clearOnPosition(l.to),e.isHTML5?e._a&&(s=e.position,e.setPosition(0),e.position=s,e._a.pause(),e.playState=0,e._onTimer(),h()):(O._stop(e.id,o),l.serverURL&&e.unload()),e.instanceCount=0,e._iO={},l.onstop&&l.onstop.apply(e)),e},this.setAutoPlay=function(o){t._wD(e.id+": Autoplay turned "+(o?"on":"off")),e._iO.autoPlay=o,e.isHTML5||(O._setAutoPlay(e.id,o),o&&!e.instanceCount&&1===e.readyState&&(e.instanceCount++,t._wD(e.id+": Incremented instance count to "+e.instanceCount)))},this.getAutoPlay=function(){return e._iO.autoPlay},this.setPlaybackRate=function(o){var l=Math.max(.5,Math.min(4,o));if(l!==o&&t._wD(e.id+": setPlaybackRate("+o+"): limiting rate to "+l,2),e.isHTML5)try{e._iO.playbackRate=l,e._a.playbackRate=l}catch(s){t._wD(e.id+": setPlaybackRate("+l+") failed: "+s.message,2)}return e},this.setPosition=function(o){o===u&&(o=0);var s,c=e.isHTML5?Math.max(o,0):Math.min(e.duration||e._iO.duration,Math.max(o,0));if(e.position=c,s=e.position/V,e._resetOnPosition(e.position),e._iO.position=c,e.isHTML5){if(e._a){if(e._html5_canplay){if(e._a.currentTime.toFixed(3)!==s.toFixed(3)){t._wD(e.id+": setPosition("+s+")");try{e._a.currentTime=s,(0===e.playState||e.paused)&&e._a.pause()}catch(y){t._wD(e.id+": setPosition("+s+") failed: "+y.message,2)}}}else if(s)return t._wD(e.id+": setPosition("+s+"): Cannot seek yet, sound not ready",2),e;e.paused&&e._onTimer(!0)}}else e.readyState&&2!==e.readyState&&O._setPosition(e.id,9===d?e.position:s,e.paused||!e.playState,e._iO.multiShot);return e},this.pause=function(o){return e.paused||0===e.playState&&1!==e.readyState||(t._wD(e.id+": pause()"),e.paused=!0,e.isHTML5?(e._setup_html5().pause(),h()):(o||o===u)&&O._pause(e.id,e._iO.multiShot),e._iO.onpause&&e._iO.onpause.apply(e)),e},this.resume=function(){var o=e._iO;return e.paused&&(t._wD(e.id+": resume()"),e.paused=!1,e.playState=1,e.isHTML5?(e._setup_html5().play(),p()):(o.isMovieStar&&!o.serverURL&&e.setPosition(e.position),O._pause(e.id,o.multiShot)),!F&&o.onplay?(o.onplay.apply(e),F=!0):o.onresume&&o.onresume.apply(e)),e},this.togglePause=function(){return t._wD(e.id+": togglePause()"),0===e.playState?(e.play({position:9!==d||e.isHTML5?e.position/V:e.position}),e):(e.paused?e.resume():e.pause(),e)},this.setPan=function(o,l){return o===u&&(o=0),l===u&&(l=!1),e.isHTML5||O._setPan(e.id,o),e._iO.pan=o,l||(e.pan=o,e.options.pan=o),e},this.setVolume=function(o,l){return o===u&&(o=100),l===u&&(l=!1),e.isHTML5?e._a&&(t.muted&&!e.muted&&(e.muted=!0,e._a.muted=!0),e._a.volume=Math.max(0,Math.min(1,o/100))):O._setVolume(e.id,t.muted&&!e.muted||e.muted?0:o),e._iO.volume=o,l||(e.volume=o,e.options.volume=o),e},this.mute=function(){return e.muted=!0,e.isHTML5?e._a&&(e._a.muted=!0):O._setVolume(e.id,0),e},this.unmute=function(){e.muted=!1;var o=e._iO.volume!==u;return e.isHTML5?e._a&&(e._a.muted=!1):O._setVolume(e.id,o?e._iO.volume:e.options.volume),e},this.toggleMute=function(){return e.muted?e.unmute():e.mute()},this.onPosition=function(o,l,s){return C.push({position:parseInt(o,10),method:l,scope:s!==u?s:e,fired:!1}),e},this.onposition=this.onPosition,this.clearOnPosition=function(o,l){var s;if(o=parseInt(o,10),!isNaN(o))for(s=0;s<C.length;s++)o===C[s].position&&(!l||l===C[s].method)&&(C[s].fired&&A--,C.splice(s,1))},this._processOnPosition=function(){var o,l,s=C.length;if(!s||!e.playState||A>=s)return!1;for(o=s-1;o>=0;o--)!(l=C[o]).fired&&e.position>=l.position&&(l.fired=!0,A++,l.method.apply(l.scope,[l.position]),s=C.length);return!0},this._resetOnPosition=function(o){var l,s,c=C.length;if(!c)return!1;for(l=c-1;l>=0;l--)(s=C[l]).fired&&o<=s.position&&(s.fired=!1,A--);return!0},ce=function(){var c,y,o=e._iO,l=o.from,s=o.to;return y=function(){t._wD(e.id+': "To" time of '+s+" reached."),e.clearOnPosition(s,y),e.stop()},c=function(){t._wD(e.id+': Playing "from" '+l),null!==s&&!isNaN(s)&&e.onPosition(s,y)},null!==l&&!isNaN(l)&&(o.position=l,o.multiShot=!1,c()),o},_=function(){var o,l=e._iO.onposition;if(l)for(o in l)l.hasOwnProperty(o)&&e.onPosition(parseInt(o,10),l[o])},X=function(){var o,l=e._iO.onposition;if(l)for(o in l)l.hasOwnProperty(o)&&e.clearOnPosition(parseInt(o,10))},p=function(){e.isHTML5&&Pt(e)},h=function(){e.isHTML5&&Ft(e)},(a=function(o){o||(C=[],A=0),F=!1,e._hasTimer=null,e._a=null,e._html5_canplay=!1,e.bytesLoaded=null,e.bytesTotal=null,e.duration=e._iO&&e._iO.duration?e._iO.duration:null,e.durationEstimate=null,e.buffered=[],e.eqData=[],e.eqData.left=[],e.eqData.right=[],e.failures=0,e.isBuffering=!1,e.instanceOptions={},e.instanceCount=0,e.loaded=!1,e.metadata={},e.readyState=0,e.muted=!1,e.paused=!1,e.peakData={left:0,right:0},e.waveformData={left:[],right:[]},e.playState=0,e.position=null,e.id3={}})(),this._onTimer=function(o){var l,c,s=!1,y={};return(e._hasTimer||o)&&e._a&&(o||(e.playState>0||1===e.readyState)&&!e.paused)&&((l=e._get_html5_duration())!==$.duration&&($.duration=l,e.duration=l,s=!0),e.durationEstimate=e.duration,(c=e._a.currentTime*V||0)!==$.time&&($.time=c,s=!0),(s||o)&&e._whileplaying(c,y,y,y,y)),s},this._get_html5_duration=function(){var o=e._iO,l=e._a&&e._a.duration?e._a.duration*V:o&&o.duration?o.duration:null;return l&&!isNaN(l)&&l!==1/0?l:null},this._apply_loop=function(o,l){!o.loop&&l>1&&t._wD("Note: Native HTML5 looping is infinite.",1),o.loop=l>1?"loop":""},this._setup_html5=function(o){var y,l=B(e._iO,o),s=G?Ae:e._a,c=decodeURI(l.url);if(G?c===decodeURI(rt)&&(y=!0):c===decodeURI(ie)&&(y=!0),s){if(s._s)if(G)s._s&&s._s.playState&&!y&&s._s.stop();else if(!G&&c===decodeURI(ie))return e._apply_loop(s,l.loops),s;y||(ie&&a(!1),s.src=l.url,e.url=l.url,ie=l.url,rt=l.url,s._called_load=!1)}else l.autoLoad||l.autoPlay?(e._a=new Audio(l.url),e._a.load()):e._a=ct&&opera.version()<10?new Audio(null):new Audio,(s=e._a)._called_load=!1,G&&(Ae=s);return e.isHTML5=!0,e._a=s,s._s=e,r(),e._apply_loop(s,l.loops),l.autoLoad||l.autoPlay?e.load():(s.autobuffer=!1,s.preload="auto"),s},r=function(){if(e._a._added_events)return!1;var o;for(o in e._a._added_events=!0,ne)ne.hasOwnProperty(o)&&(void 0,e._a&&e._a.addEventListener(o,ne[o],!1));return!0},n=function(){var o;for(o in t._wD(e.id+": Removing event listeners"),e._a._added_events=!1,ne)ne.hasOwnProperty(o)&&(void 0,e._a&&e._a.removeEventListener(o,ne[o],!1))},this._onload=function(o){var l,s=!!o||!e.isHTML5&&8===d&&e.duration;return t._wD((l=e.id+": ")+(s?"onload()":"Failed to load / invalid sound?"+(e.duration?" -":" Zero-length duration reported.")+" ("+e.url+")"),s?1:2),!s&&!e.isHTML5&&(!0===t.sandbox.noRemote&&t._wD(l+P("noNet"),1),!0===t.sandbox.noLocal&&t._wD(l+P("noLocal"),1)),e.loaded=s,e.readyState=s?3:2,e._onbufferchange(0),!s&&!e.isHTML5&&e._onerror(),e._iO.onload&&Ce(e,function(){e._iO.onload.apply(e,[s])}),!0},this._onerror=function(o,l){e._iO.onerror&&Ce(e,function(){e._iO.onerror.apply(e,[o,l])})},this._onbufferchange=function(o){return!(0===e.playState||o&&e.isBuffering||!o&&!e.isBuffering||(e.isBuffering=1===o,e._iO.onbufferchange&&(t._wD(e.id+": Buffer state change: "+o),e._iO.onbufferchange.apply(e,[o])),0))},this._onsuspend=function(){return e._iO.onsuspend&&(t._wD(e.id+": Playback suspended"),e._iO.onsuspend.apply(e)),!0},this._onfailure=function(o,l,s){e.failures++,t._wD(e.id+": Failure ("+e.failures+"): "+o),e._iO.onfailure&&1===e.failures?e._iO.onfailure(o,l,s):t._wD(e.id+": Ignoring failure")},this._onwarning=function(o,l,s){e._iO.onwarning&&e._iO.onwarning(o,l,s)},this._onfinish=function(){var o=e._iO.onfinish;e._onbufferchange(0),e._resetOnPosition(0),e.instanceCount&&(e.instanceCount--,e.instanceCount||(X(),e.playState=0,e.paused=!1,e.instanceCount=0,e.instanceOptions={},e._iO={},h(),e.isHTML5&&(e.position=0)),(!e.instanceCount||e._iO.multiShotEvents)&&o&&(t._wD(e.id+": onfinish()"),Ce(e,function(){o.apply(e)})))},this._whileloading=function(o,l,s,c){var y=e._iO;e.bytesLoaded=o,e.bytesTotal=l,e.duration=Math.floor(s),e.bufferLength=c,e.durationEstimate=e.isHTML5||y.isMovieStar?e.duration:y.duration?e.duration>y.duration?e.duration:y.duration:parseInt(e.bytesTotal/e.bytesLoaded*e.duration,10),e.isHTML5||(e.buffered=[{start:0,end:e.duration}]),(3!==e.readyState||e.isHTML5)&&y.whileloading&&y.whileloading.apply(e)},this._whileplaying=function(o,l,s,c,y){var k,K=e._iO;return!isNaN(o)&&null!==o&&(e.position=Math.max(0,o),e._processOnPosition(),!e.isHTML5&&d>8&&(K.usePeakData&&l!==u&&l&&(e.peakData={left:l.leftPeak,right:l.rightPeak}),K.useWaveformData&&s!==u&&s&&(e.waveformData={left:s.split(","),right:c.split(",")}),K.useEQData&&y!==u&&y&&y.leftEQ&&(k=y.leftEQ.split(","),e.eqData=k,e.eqData.left=k,y.rightEQ!==u&&y.rightEQ&&(e.eqData.right=y.rightEQ.split(",")))),1===e.playState&&(!e.isHTML5&&8===d&&!e.position&&e.isBuffering&&e._onbufferchange(0),K.whileplaying&&K.whileplaying.apply(e)),!0)},this._oncaptiondata=function(o){t._wD(e.id+": Caption data received."),e.captiondata=o,e._iO.oncaptiondata&&e._iO.oncaptiondata.apply(e,[o])},this._onmetadata=function(o,l){t._wD(e.id+": Metadata received.");var c,y,s={};for(c=0,y=o.length;c<y;c++)s[o[c]]=l[c];e.metadata=s,e._iO.onmetadata&&e._iO.onmetadata.call(e,e.metadata)},this._onid3=function(o,l){t._wD(e.id+": ID3 data received.");var c,y,s=[];for(c=0,y=o.length;c<y;c++)s[o[c]]=l[c];e.id3=B(e.id3,s),e._iO.onid3&&e._iO.onid3.apply(e)},this._onconnect=function(o){t._wD(e.id+": "+((o=1===o)?"Connected.":"Failed to connect? - "+e.url),o?1:2),e.connected=o,o&&(e.failures=0,E(e.id)&&(e.getAutoPlay()?e.play(u,e.getAutoPlay()):e._iO.autoLoad&&e.load()),e._iO.onconnect&&e._iO.onconnect.apply(e,[o]))},this._ondataerror=function(o){e.playState>0&&(t._wD(e.id+": Data error: "+o),e._iO.ondataerror&&e._iO.ondataerror.apply(e))},this._debug()},xe=function(){return L.body||L.getElementsByTagName("div")[0]},J=function(i){return L.getElementById(i)},B=function(i,e){var r,n,a=i||{};for(n in r=e===u?t.defaultOptions:e)r.hasOwnProperty(n)&&a[n]===u&&(a[n]="object"!=typeof r[n]||null===r[n]?r[n]:B(a[n],r[n]));return a},Ce=function(i,e){i.isHTML5||8!==d?e():M.setTimeout(e,0)},bt={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},$e=function(i,e){var a,r=!0,n=e!==u,h=t.setupOptions,p=bt;if(i===u){for(a in r=[],h)h.hasOwnProperty(a)&&r.push(a);for(a in p)p.hasOwnProperty(a)&&r.push("object"==typeof t[a]?a+": {...}":t[a]instanceof Function?a+": function() {...}":a);return t._wD(P("setup",r.join(", "))),!1}for(a in i)if(i.hasOwnProperty(a))if("object"!=typeof i[a]||null===i[a]||i[a]instanceof Array||i[a]instanceof RegExp)n&&p[e]!==u?t[e][a]=i[a]:h[a]!==u?(t.setupOptions[a]=i[a],t[a]=i[a]):p[a]===u?(re(P(t[a]===u?"setupUndef":"setupError",a),2),r=!1):t[a]instanceof Function?t[a].apply(t,i[a]instanceof Array?i[a]:[i[a]]):t[a]=i[a];else{if(p[a]!==u)return $e(i[a],a);re(P(t[a]===u?"setupUndef":"setupError",a),2),r=!1}return r},W=function(){var i=M.attachEvent,e={add:i?"attachEvent":"addEventListener",remove:i?"detachEvent":"removeEventListener"};function a(p){var _=Et.call(p),F=_.length;return i?(_[1]="on"+_[1],F>3&&_.pop()):3===F&&_.push(!1),_}function r(p,_){var F=p.shift(),C=[e[_]];i?F[C](p[0],p[1]):F[C].apply(F,p)}return{add:function n(){r(a(arguments),"add")},remove:function h(){r(a(arguments),"remove")}}}(),ne={abort:j(function(){t._wD(this._s.id+": abort")}),canplay:j(function(){var e,i=this._s;if(!i._html5_canplay){if(i._html5_canplay=!0,t._wD(i.id+": canplay"),i._onbufferchange(0),e=i._iO.position===u||isNaN(i._iO.position)?null:i._iO.position/V,this.currentTime!==e){t._wD(i.id+": canplay: Setting position to "+e);try{this.currentTime=e}catch(a){t._wD(i.id+": canplay: Setting position of "+e+" failed: "+a.message,2)}}i._iO._oncanplay&&i._iO._oncanplay()}}),canplaythrough:j(function(){var i=this._s;i.loaded||(i._onbufferchange(0),i._whileloading(i.bytesLoaded,i.bytesTotal,i._get_html5_duration()),i._onload(!0))}),durationchange:j(function(){var e,i=this._s;e=i._get_html5_duration(),!isNaN(e)&&e!==i.duration&&(t._wD(this._s.id+": durationchange ("+e+")"+(i.duration?", previously "+i.duration:"")),i.durationEstimate=i.duration=e)}),ended:j(function(){var i=this._s;t._wD(i.id+": ended"),i._onfinish()}),error:j(function(){var i=At[this.error.code]||null;t._wD(this._s.id+": HTML5 error, code "+this.error.code+(i?" ("+i+")":"")),this._s._onload(!1),this._s._onerror(this.error.code,i)}),loadeddata:j(function(){var i=this._s;t._wD(i.id+": loadeddata"),!i._loaded&&!Ve&&(i.duration=i._get_html5_duration())}),loadedmetadata:j(function(){t._wD(this._s.id+": loadedmetadata")}),loadstart:j(function(){t._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:j(function(){this._s._onbufferchange(0)}),playing:j(function(){t._wD(this._s.id+": playing \u266b"),this._s._onbufferchange(0)}),progress:j(function(i){var a,r,n,e=this._s,h=0,p="progress"===i.type,_=i.target.buffered,F=i.loaded||0,C=i.total||1;if(e.buffered=[],_&&_.length){for(a=0,r=_.length;a<r;a++)e.buffered.push({start:_.start(a)*V,end:_.end(a)*V});if(h=(_.end(0)-_.start(0))*V,F=Math.min(1,h/(i.target.duration*V)),p&&_.length>1){for(n=[],r=_.length,a=0;a<r;a++)n.push(i.target.buffered.start(a)*V+"-"+i.target.buffered.end(a)*V);t._wD(this._s.id+": progress, timeRanges: "+n.join(", "))}p&&!isNaN(F)&&t._wD(this._s.id+": progress, "+Math.floor(100*F)+"% loaded")}isNaN(F)||(e._whileloading(F,C,e._get_html5_duration()),F&&C&&F===C&&ne.canplaythrough.call(this,i))}),ratechange:j(function(){t._wD(this._s.id+": ratechange")}),suspend:j(function(i){var e=this._s;t._wD(this._s.id+": suspend"),ne.progress.call(this,i),e._onsuspend()}),stalled:j(function(){t._wD(this._s.id+": stalled")}),timeupdate:j(function(){this._s._onTimer()}),waiting:j(function(){var i=this._s;t._wD(this._s.id+": waiting"),i._onbufferchange(1)})},We=function(i){return!(!i||!i.type&&!i.url&&!i.serverURL||i.serverURL||i.type&&Ge(i.type))&&(i.type?Fe({type:i.type}):Fe({url:i.url})||t.html5Only||i.url.match(/data:/i))},ze=function(i){var e;return i&&(e=Ve?yt:t.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":yt,i.src=e,i._called_unload!==u&&(i._called_load=!1)),G&&(rt=null),e},Fe=function(i){if(!t.useHTML5Audio||!t.hasHTML5)return!1;var n,h,p,_,e=i.url||null,a=i.type||null,r=t.audioFormats;if(a&&t.html5[a]!==u)return t.html5[a]&&!Ge(a);if(!ue){for(_ in ue=[],r)r.hasOwnProperty(_)&&(ue.push(_),r[_].related&&(ue=ue.concat(r[_].related)));ue=new RegExp("\\.("+ue.join("|")+")(\\?.*)?$","i")}return(p=e?e.toLowerCase().match(ue):null)&&p.length?p=p[1]:a?p=(-1!==(h=a.indexOf(";"))?a.substr(0,h):a).substr(6):n=!1,p&&t.html5[p]!==u?n=t.html5[p]&&!Ge(p):(n=t.html5.canPlayType({type:a="audio/"+p}),t.html5[p]=n,n=n&&t.html5[a]&&!Ge(a)),n},Ht=function(){if(!t.useHTML5Audio||!t.hasHTML5)return t.html5.usingFlash=!0,q=!0,!1;var e,a,n,h,i=Audio!==u?ct&&opera.version()<10?new Audio(null):new Audio:null,r={};function p(_){var F,C,A=!1,X=!1;if(!i||"function"!=typeof i.canPlayType)return A;if(_ instanceof Array){for(h=0,C=_.length;h<C;h++)(t.html5[_[h]]||i.canPlayType(_[h]).match(t.html5Test))&&(X=!0,t.html5[_[h]]=!0,t.flash[_[h]]=!!_[h].match(Nt));A=X}else A=!(!(F=!(!i||"function"!=typeof i.canPlayType)&&i.canPlayType(_))||!F.match(t.html5Test));return A}for(e in n=t.audioFormats)if(n.hasOwnProperty(e)&&(a="audio/"+e,r[e]=p(n[e].type),r[a]=r[e],e.match(Nt)?(t.flash[e]=!0,t.flash[a]=!0):(t.flash[e]=!1,t.flash[a]=!1),n[e]&&n[e].related))for(h=n[e].related.length-1;h>=0;h--)r["audio/"+n[e].related[h]]=r[e],t.html5[n[e].related[h]]=r[e],t.flash[n[e].related[h]]=r[e];return r.canPlayType=i?p:null,t.html5=B(t.html5,r),t.html5.usingFlash=Rt(),q=t.html5.usingFlash,!0},te={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:D+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:S+"Verify that %s is a valid path.",tryDebug:"Try "+D+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:S+"Non-HTTP page ("+L.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:S+"Special case: Waiting for SWF to load with window focus...",waitForever:S+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:S+"Waiting for 100% SWF load...",needFunction:S+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:S+"_debug(): Current sound objects",waitOnload:S+"Waiting for window.onload()",docLoaded:S+"Document already loaded",onload:S+"initComplete(): calling soundManager.onload()",onloadOK:D+".onload() complete",didInit:S+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:S+"Failed to remove Flash node.",shutdown:D+".disable(): Shutting down",queue:S+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+Q.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:S+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:D+".load(): current URL already assigned.",badFV:D+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:S+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:S+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:D+".setup(): allowed parameters: %s",setupError:D+'.setup(): "%s" cannot be assigned with this method.',setupUndef:D+'.setup(): Could not find option "%s"',setupLate:D+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:S+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. \u2713",reset:D+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},P=function(){var i,e,a,r,n;if(r=(i=Et.call(arguments)).shift(),(n=te&&te[r]?te[r]:"")&&i&&i.length)for(e=0,a=i.length;e<a;e++)n=n.replace("%s",i[e]);return n},Ue=function(i){return 8===d&&i.loops>1&&i.stream&&(v("as2loop"),i.stream=!1),i},Ne=function(i,e){return i&&!i.usePolicyFile&&(i.onid3||i.usePeakData||i.useWaveformData||i.useEQData)&&(t._wD((e||"")+P("policy")),i.usePolicyFile=!0),i},re=function(i){mt&&console.warn!==u?console.warn(i):t._wD(i)},Oe=function(){return!1},tt=function(i){var e;for(e in i)i.hasOwnProperty(e)&&"function"==typeof i[e]&&(i[e]=Oe);e=null},it=function(i){i===u&&(i=!1),(R||i)&&t.disable(i)},Tt=function(i){var a;if(i)if(i.match(/\.swf(\?.*)?$/i)){if(i.substr(i.toLowerCase().lastIndexOf(".swf?")+4))return i}else i.lastIndexOf("/")!==i.length-1&&(i+="/");return a=(i&&-1!==i.lastIndexOf("/")?i.substr(0,i.lastIndexOf("/")+1):"./")+t.movieURL,t.noSWFCache&&(a+="?ts="+(new Date).getTime()),a},Xe=function(){8!==(d=parseInt(t.flashVersion,10))&&9!==d&&(t._wD(P("badFV",d,8)),t.flashVersion=d=8);var i=t.debugMode||t.debugFlash?"_debug.swf":".swf";t.useHTML5Audio&&!t.html5Only&&t.audioFormats.mp4.required&&d<9&&(t._wD(P("needfl9")),t.flashVersion=d=9),t.version=t.versionNumber+(t.html5Only?" (HTML5-only mode)":9===d?" (AS3/Flash 9)":" (AS2/Flash 8)"),d>8?(t.defaultOptions=B(t.defaultOptions,t.flash9Options),t.features.buffering=!0,t.defaultOptions=B(t.defaultOptions,t.movieStarOptions),t.filePatterns.flash9=new RegExp("\\.(mp3|"+jt.join("|")+")(\\?.*)?$","i"),t.features.movieStar=!0):t.features.movieStar=!1,t.filePattern=t.filePatterns[8!==d?"flash9":"flash8"],t.movieURL=(8===d?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",i),t.features.peakData=t.features.waveformData=t.features.eqData=d>8},Ot=function(i,e){O&&O._setPolling(i,e)},et=function(){if(t.debugURLParam.test(ge)&&(t.setupOptions.debugMode=t.debugMode=!0),!J(t.debugID)){var i,e,a,r,n;if(t.debugMode&&!J(t.debugID)&&(!mt||!t.useConsole||!t.consoleOnly)){for(n in(i=L.createElement("div")).id=t.debugID+"-toggle",r={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},i.appendChild(L.createTextNode("-")),i.onclick=Dt,i.title="Toggle SM2 debug console",U.match(/msie 6/i)&&(i.style.position="absolute",i.style.cursor="hand"),r)r.hasOwnProperty(n)&&(i.style[n]=r[n]);if((e=L.createElement("div")).id=t.debugID,e.style.display=t.debugMode?"block":"none",t.debugMode&&!J(i.id)){try{(a=xe()).appendChild(i)}catch(h){throw new Error(P("domError")+" \n"+h.toString())}a.appendChild(e)}}a=null}},E=this.getSoundById,v=function(i,e){return i?t._wD(P(i),e):""},Dt=function(){var i=J(t.debugID),e=J(t.debugID+"-toggle");i&&(m?(e.innerHTML="+",i.style.display="none"):(e.innerHTML="-",i.style.display="block"),m=!m)},g=function(i,e,a){if(M.sm2Debugger!==u)try{sm2Debugger.handleEvent(i,e,a)}catch{return!1}return!0},we=function(){var i=[];return t.debugMode&&i.push(Q.sm2Debug),t.debugFlash&&i.push(Q.flashDebug),t.useHighPerformance&&i.push(Q.highPerf),i.join(" ")},ot=function(){var i=P("fbHandler"),e=t.getMoviePercent(),a=Q,r={type:"FLASHBLOCK"};t.html5Only||(t.ok()?(t.didFlashBlock&&t._wD(i+": Unblocked"),t.oMC&&(t.oMC.className=[we(),a.swfDefault,a.swfLoaded+(t.didFlashBlock?" "+a.swfUnblocked:"")].join(" "))):(q&&(t.oMC.className=we()+" "+a.swfDefault+" "+(null===e?a.swfTimedout:a.swfError),t._wD(i+": "+P("fbTimeout")+(e?" ("+P("fbLoaded")+")":""))),t.didFlashBlock=!0,de({type:"ontimeout",ignoreInit:!0,error:r}),ve(r)))},Je=function(i,e,a){f[i]===u&&(f[i]=[]),f[i].push({method:e,scope:a||null,fired:!1})},de=function(i){if(i||(i={type:t.ok()?"onready":"ontimeout"}),!b&&i&&!i.ignoreInit||"ontimeout"===i.type&&(t.ok()||R&&!i.ignoreInit))return!1;var n,h,e={success:i&&i.ignoreInit?t.ok():!R},a=i&&i.type&&f[i.type]||[],r=[],p=[e],_=q&&!t.ok();for(i.error&&(p[0].error=i.error),n=0,h=a.length;n<h;n++)!0!==a[n].fired&&r.push(a[n]);if(r.length)for(n=0,h=r.length;n<h;n++)r[n].method.apply(r[n].scope?r[n].scope:this,p),_||(r[n].fired=!0);return!0},ye=function(){M.setTimeout(function(){t.useFlashBlock&&ot(),de(),"function"==typeof t.onload&&(v("onload",1),t.onload.apply(M),v("onloadOK",1)),t.waitForWindowLoad&&W.add(M,"load",ye)},1)},lt=function(){if(oe!==u)return oe;var a,r,n,p,i=!1,e=navigator,h=M.ActiveXObject;try{p=e.plugins}catch{p=void 0}if(p&&p.length)r="application/x-shockwave-flash",(n=e.mimeTypes)&&n[r]&&n[r].enabledPlugin&&n[r].enabledPlugin.description&&(i=!0);else if(h!==u&&!U.match(/MSAppHost/i)){try{a=new h("ShockwaveFlash.ShockwaveFlash")}catch{a=null}i=!!a,a=null}return oe=i,i},Rt=function(){var i,e,a=t.audioFormats;if(dt&&U.match(/os (1|2|3_0|3_1)\s/i)?(t.hasHTML5=!1,t.html5Only=!0,t.oMC&&(t.oMC.style.display="none")):t.useHTML5Audio&&((!t.html5||!t.html5.canPlayType)&&(t._wD("SoundManager: No HTML5 Audio() support detected."),t.hasHTML5=!1),pt&&t._wD(S+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(oe?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),t.useHTML5Audio&&t.hasHTML5)for(e in Pe=!0,a)a.hasOwnProperty(e)&&a[e].required&&(t.html5.canPlayType(a[e].type)?t.preferFlash&&(t.flash[e]||t.flash[a[e].type])&&(i=!0):(Pe=!1,i=!0));return t.ignoreFlash&&(i=!1,Pe=!0),t.html5Only=t.hasHTML5&&t.useHTML5Audio&&!i,!t.html5Only},je=function(i){var e,a,n,r=0;if(i instanceof Array){for(e=0,a=i.length;e<a;e++)if(i[e]instanceof Object){if(t.canPlayMIME(i[e].type)){r=e;break}}else if(t.canPlayURL(i[e])){r=e;break}i[r].url&&(i[r]=i[r].url),n=i[r]}else n=i;return n},Pt=function(i){i._hasTimer||(i._hasTimer=!0,!Ke&&t.html5PollingInterval&&(null===De&&0===Be&&(De=setInterval(Ct,t.html5PollingInterval)),Be++))},Ft=function(i){i._hasTimer&&(i._hasTimer=!1,!Ke&&t.html5PollingInterval&&Be--)},Ct=function(){var i;if(null!==De&&!Be)return clearInterval(De),void(De=null);for(i=t.soundIDs.length-1;i>=0;i--)t.sounds[t.soundIDs[i]].isHTML5&&t.sounds[t.soundIDs[i]]._hasTimer&&t.sounds[t.soundIDs[i]]._onTimer()},ve=function(i){i=i!==u?i:{},"function"==typeof t.onerror&&t.onerror.apply(M,[{type:i.type!==u?i.type:null}]),i.fatal!==u&&i.fatal&&t.disable()},It=function(){if(pt&&lt()){var e,a,i=t.audioFormats;for(a in i)if(i.hasOwnProperty(a)&&("mp3"===a||"mp4"===a)&&(t._wD(D+": Using flash fallback for "+a+" format"),t.html5[a]=!1,i[a]&&i[a].related))for(e=i[a].related.length-1;e>=0;e--)t.html5[i[a].related[e]]=!1}},this._setSandboxType=function(i){var e=t.sandbox;e.type=i,e.description=e.types[e.types[i]!==u?i:"unknown"],"localWithFile"===e.type?(e.noRemote=!0,e.noLocal=!1,v("secNote",2)):"localWithNetwork"===e.type?(e.noRemote=!1,e.noLocal=!0):"localTrusted"===e.type&&(e.noRemote=!1,e.noLocal=!1)},this._externalInterfaceOK=function(i){if(!t.swfLoaded){var e;if(g("swf",!0),g("flashtojs",!0),t.swfLoaded=!0,qe=!1,pt&&It(),!i||i.replace(/\+dev/i,"")!==t.versionNumber.replace(/\+dev/i,""))return e=D+': Fatal: JavaScript file build "'+t.versionNumber+'" does not match Flash SWF build "'+i+'" at '+t.url+". Ensure both are up-to-date.",void setTimeout(function(){throw new Error(e)},0);setTimeout(z,fe?100:1)}},ke=function(i,e){if(w&&T)return!1;function a(){var y,c=[],K=[];y="SoundManager "+t.version+(!t.html5Only&&t.useHTML5Audio?t.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),t.html5Only?t.html5PollingInterval&&c.push("html5PollingInterval ("+t.html5PollingInterval+"ms)"):(t.preferFlash&&c.push("preferFlash"),t.useHighPerformance&&c.push("useHighPerformance"),t.flashPollingInterval&&c.push("flashPollingInterval ("+t.flashPollingInterval+"ms)"),t.html5PollingInterval&&c.push("html5PollingInterval ("+t.html5PollingInterval+"ms)"),t.wmode&&c.push("wmode ("+t.wmode+")"),t.debugFlash&&c.push("debugFlash"),t.useFlashBlock&&c.push("flashBlock")),c.length&&(K=K.concat([c.join(" + ")])),t._wD(y+(K.length?" + "+K.join(", "):""),1),xt()}if(t.html5Only)return Xe(),a(),t.oMC=J(t.movieID),z(),w=!0,T=!0,!1;var F,A,X,ce,ie,$,Z,o,l,r=e||t.url,n=t.altURL||r,p=xe(),_=we(),C=L.getElementsByTagName("html")[0];function s(c,y){return'<param name="'+c+'" value="'+y+'" />'}if(F=C&&C.dir&&C.dir.match(/rtl/i),i=i===u?t.id:i,Xe(),t.url=Tt(Re?r:n),e=t.url,t.wmode=!t.wmode&&t.useHighPerformance?"transparent":t.wmode,null!==t.wmode&&(U.match(/msie 8/i)||!fe&&!t.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(le.push(te.spcWmode),t.wmode=null),A={name:i,id:i,src:e,quality:"high",allowScriptAccess:t.allowScriptAccess,bgcolor:t.bgColor,pluginspage:Kt+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:t.wmode,hasPriority:"true"},t.debugFlash&&(A.FlashVars="debug=1"),t.wmode||delete A.wmode,fe)X=L.createElement("div"),ie=['<object id="'+i+'" data="'+e+'" type="'+A.type+'" title="'+A.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',s("movie",e),s("AllowScriptAccess",t.allowScriptAccess),s("quality",A.quality),t.wmode?s("wmode",t.wmode):"",s("bgcolor",t.bgColor),s("hasPriority","true"),t.debugFlash?s("FlashVars",A.FlashVars):"","</object>"].join("");else for(ce in X=L.createElement("embed"),A)A.hasOwnProperty(ce)&&X.setAttribute(ce,A[ce]);if(et(),_=we(),p=xe())if(t.oMC=J(t.movieID)||L.createElement("div"),t.oMC.id)t.oMC.className=((l=t.oMC.className)?l+" ":Q.swfDefault)+(_?" "+_:""),t.oMC.appendChild(X),fe&&(($=t.oMC.appendChild(L.createElement("div"))).className=Q.swfBox,$.innerHTML=ie),T=!0;else{if(t.oMC.id=t.movieID,t.oMC.className=Q.swfDefault+" "+_,Z=null,$=null,t.useFlashBlock||(t.useHighPerformance?Z={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(Z={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},F&&(Z.left=Math.abs(parseInt(Z.left,10))+"px"))),zt&&(t.oMC.style.zIndex=1e4),!t.debugFlash)for(o in Z)Z.hasOwnProperty(o)&&(t.oMC.style[o]=Z[o]);try{fe||t.oMC.appendChild(X),p.appendChild(t.oMC),fe&&(($=t.oMC.appendChild(L.createElement("div"))).className=Q.swfBox,$.innerHTML=ie),T=!0}catch(c){throw new Error(P("domError")+" \n"+c.toString())}}return w=!0,a(),!0},Ie=function(){return t.html5Only?(ke(),!1):!O&&(t.url?((O=t.getMovie(t.id))||(Le?(fe?t.oMC.innerHTML=at:t.oMC.appendChild(Le),Le=null,w=!0):ke(t.id,t.url),O=t.getMovie(t.id)),"function"==typeof t.oninitmovie&&setTimeout(t.oninitmovie,1),ut(),!0):(v("noURL"),!1))},_e=function(){setTimeout(Mt,1e3)},Qe=function(){M.setTimeout(function(){re(S+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),t.setup({preferFlash:!1}).reboot(),t.didFlashBlock=!0,t.beginDelayedInit()},1)},Mt=function(){var i,e=!1;if(t.url&&!Te){if(Te=!0,W.remove(M,"load",_e),oe&&qe&&!gt)return void v("waitFocus");b||(i=t.getMoviePercent())>0&&i<100&&(e=!0),setTimeout(function(){if(i=t.getMoviePercent(),e)return Te=!1,t._wD(P("waitSWF")),void M.setTimeout(_e,1);b||(t._wD(D+": No Flash response within expected time. Likely causes: "+(0===i?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(t.debugFlash?" "+P("checkSWF"):""),2),!Re&&i&&(v("localFail",2),t.debugFlash||v("tryDebug",2)),0===i&&t._wD(P("swf404",t.url),1),g("flashtojs",!1,": Timed out"+(Re?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),!b&&Ut&&(null===i?t.useFlashBlock||0===t.flashLoadTimeout?(t.useFlashBlock&&ot(),v("waitForever")):!t.useFlashBlock&&Pe?Qe():(v("waitForever"),de({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===t.flashLoadTimeout?v("waitForever"):!t.useFlashBlock&&Pe?Qe():it(!0))},t.flashLoadTimeout)}},Ze=function(){function i(){W.remove(M,"focus",Ze)}return gt||!qe?(i(),!0):(Ut=!0,gt=!0,v("gotFocus"),Te=!1,_e(),i(),!0)},ut=function(){le.length&&(t._wD("SoundManager 2: "+le.join(" "),1),le=[])},xt=function(){ut();var i,e=[];if(t.useHTML5Audio&&t.hasHTML5){for(i in t.audioFormats)t.audioFormats.hasOwnProperty(i)&&e.push(i+" = "+t.html5[i]+(!t.html5[i]&&q&&t.flash[i]?" (using flash)":t.preferFlash&&t.flash[i]&&q?" (preferring flash)":t.html5[i]?"":" ("+(t.audioFormats[i].required?"required, ":"")+"and no flash support)"));t._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},N=function(i){if(b)return!1;if(t.html5Only)return v("sm2Loaded",1),b=!0,ye(),g("onload",!0),!0;var r,a=!0;return t.useFlashBlock&&t.flashLoadTimeout&&!t.getMoviePercent()||(b=!0),r={type:!oe&&q?"NO_FLASH":"INIT_TIMEOUT"},t._wD("SoundManager 2 "+(R?"failed to load":"loaded")+" ("+(R?"Flash security/load error":"OK")+") "+String.fromCharCode(R?10006:10003),R?2:1),R||i?(t.useFlashBlock&&t.oMC&&(t.oMC.className=we()+" "+(null===t.getMoviePercent()?Q.swfTimedout:Q.swfError)),de({type:"ontimeout",error:r,ignoreInit:!0}),g("onload",!1),ve(r),a=!1):g("onload",!0),R||(t.waitForWindowLoad&&!I?(v("waitOnload"),W.add(M,"load",ye)):(t.waitForWindowLoad&&I&&v("docLoaded"),ye())),a},Ee=function(){var i,e=t.setupOptions;for(i in e)e.hasOwnProperty(i)&&(t[i]===u?t[i]=e[i]:t[i]!==e[i]&&(t.setupOptions[i]=t[i]))},z=function(){if(b)return v("didInit"),!1;function i(){W.remove(M,"load",t.beginDelayedInit)}if(t.html5Only)return b||(i(),t.enabled=!0,N()),!0;Ie();try{O._externalInterfaceTest(!1),Ot(!0,t.flashPollingInterval||(t.useHighPerformance?10:50)),t.debugMode||O._disableDebug(),t.enabled=!0,g("jstoflash",!0),t.html5Only||W.add(M,"unload",Oe)}catch(e){return t._wD("js/flash exception: "+e.toString()),g("jstoflash",!1),ve({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),it(!0),N(),!1}return N(),i(),!0},he=function(){return!Se&&(Se=!0,Ee(),et(),!oe&&t.hasHTML5&&(t._wD("SoundManager 2: No Flash detected"+(t.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),t.setup({useHTML5Audio:!0,preferFlash:!1})),Ht(),!oe&&q&&(le.push(te.needFlash),t.setup({flashLoadTimeout:1})),L.removeEventListener&&L.removeEventListener("DOMContentLoaded",he,!1),Ie(),!0)},st=function(){return"complete"===L.readyState&&(he(),L.detachEvent("onreadystatechange",st)),!0},Ye=function(){I=!0,he(),W.remove(M,"load",Ye)},lt(),W.add(M,"focus",Ze),W.add(M,"load",_e),W.add(M,"load",Ye),L.addEventListener?L.addEventListener("DOMContentLoaded",he,!1):L.attachEvent?L.attachEvent("onreadystatechange",st):(g("onload",!1),ve({type:"NO_DOM2_EVENTS",fatal:!0}))}(M.SM2_DEFER===u||!SM2_DEFER)&&(pe=new Y),ae&&"object"==typeof ae.exports?(ae.exports.SoundManager=Y,ae.exports.soundManager=pe):void 0!==(Me=function(){return{constructor:Y,getInstance:function me(ee){if(!M.soundManager&&ee instanceof Function){var se=ee(Y);se instanceof Y&&(M.soundManager=se)}return M.soundManager}}}.call(be,H,be,ae))&&(ae.exports=Me),M.SoundManager=Y,M.soundManager=pe}(window)}}]);