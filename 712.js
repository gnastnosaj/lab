(self.webpackChunklab=self.webpackChunklab||[]).push([[712],{6712:(Y,z,P)=>{"use strict";P.r(z),P.d(z,{MeizhiModule:()=>bi});var w=P(1368),C=P(7048),x=P(4716),S=P(9280),M=P(4704);class b{constructor(){this.links=[]}}var l=P(4496);let D=(()=>{class i{constructor(e,o){this.http=e,this.dataPipe=o,this.modelId="6424"}refresh(){return this.nsfw=window.location.href.includes("nsfw=true"),this.next=this.proxy(this.nsfw?`https://civitai.com/api/v1/images?modelId=${this.modelId}&sort=Most%20Comments`:`https://civitai.com/api/v1/images?modelId=${this.modelId}&sort=Most%20Comments&nsfw=None`),this.loadMore()}loadMore(){return this.http.get(this.next).pipe((0,M.k)(e=>{const o=[];return e?.items?.forEach(n=>{const a=new b;a.title=this.dataPipe.transform(n.createdAt,"yyyy-MM-dd HH:mm:ss"),a.links.push(this.proxy(n.url)),o.push(a)}),this.next=this.proxy(e?.metadata?.nextPage),o}))}hasMore(){return null!=this.next}proxy(e){return e?`https://bypass.jasontsang.dev:4096/${e}`:null}static#t=this.\u0275fac=function(o){return new(o||i)(l.CoB(C.KK),l.CoB(w.y))};static#e=this.\u0275prov=l.wxM({token:i,factory:i.\u0275fac})}return i})();var f=P(9892),v=function(i,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])})(i,t)};function y(i,t){function e(){this.constructor=i}v(i,t),i.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var p=function(){return p=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},p.apply(this,arguments)};function g(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;var o=Array(i),n=0;for(t=0;t<e;t++)for(var a=arguments[t],h=0,m=a.length;h<m;h++,n++)o[n]=a[h];return o}var d=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function u(i){console.error("[BScroll warn]: "+i)}var O=typeof window<"u",_=O&&navigator.userAgent.toLowerCase(),R=!(!_||!/wechatdevtools/.test(_)),r=_&&_.indexOf("android")>0,s=function(){if("string"==typeof _){var t=/os (\d\d?_\d(_\d)?)/.exec(_);if(!t)return!1;var e=t[1].split("_").map(function(o){return parseInt(o,10)});return 13===e[0]&&e[1]>=4}return!1}(),c=!1;if(O)try{var B={};Object.defineProperty(B,"passive",{get:function(){c=!0}}),window.addEventListener("test-passive",function(){},B)}catch{}function A(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var W=function(i,t){for(var e in t)i[e]=t[e];return i};function F(i){return null==i}function J(i,t,e){return i<t?t:i>e?e:i}var Q=O&&document.createElement("div").style,U=function(){if(!O)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var o=e[t];if(void 0!==Q[o.value])return o.key}return!1}();function N(i){return!1===U?i:"standard"===U?"transitionEnd"===i?"transitionend":i:U+i.charAt(0).toUpperCase()+i.substr(1)}function lt(i){return"string"==typeof i?document.querySelector(i):i}function se(i,t,e,o){i.addEventListener(t,e,c?{passive:!1,capture:!!o}:!!o)}function ae(i,t,e,o){i.removeEventListener(t,e,{capture:!!o})}function Mt(i){i.cancelable&&i.preventDefault()}function Ot(i){for(var t=0,e=0;i;)t-=i.offsetLeft,e-=i.offsetTop,i=i.offsetParent;return{left:t,top:e}}U&&"standard"!==U&&U.toLowerCase();var he=N("transform"),Dt=N("transition"),le=O&&N("perspective")in Q,xt=O&&("ontouchstart"in window||R),ce=O&&Dt in Q,tt={transform:he,transition:Dt,transitionTimingFunction:N("transitionTimingFunction"),transitionDuration:N("transitionDuration"),transitionDelay:N("transitionDelay"),transformOrigin:N("transformOrigin"),transitionEnd:N("transitionEnd"),transitionProperty:N("transitionProperty")},wt={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function Bt(i){if(i instanceof window.SVGElement){var t=i.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:i.offsetTop,left:i.offsetLeft,width:i.offsetWidth,height:i.offsetHeight}}function ct(i,t){for(var e in t)if(t[e].test(i[e]))return!0;return!1}var ue=ct;function Lt(i,t){var e;void 0===t&&(t="click"),"mouseup"===i.type?e=i:("touchend"===i.type||"touchcancel"===i.type)&&(e=i.changedTouches[0]);var o={};e&&(o.screenX=e.screenX||0,o.screenY=e.screenY||0,o.clientX=e.clientX||0,o.clientY=e.clientY||0);var n,I={ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,metaKey:i.metaKey};if(typeof MouseEvent<"u")try{n=new MouseEvent(t,W(p({bubbles:!0,cancelable:!0},I),o))}catch{X()}else X();function X(){(n=document.createEvent("Event")).initEvent(t,!0,!0),W(n,o)}n.forwardedTouchEvent=!0,n._constructed=!0,i.target.dispatchEvent(n)}var et={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(i){return 1+--i*i*i*i*i}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(i){return i*(2-i)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(i){return 1- --i*i*i*i}}},Z=O&&window;function It(){}var vt,mt,gt,yt,At=O?Z.requestAnimationFrame||Z.webkitRequestAnimationFrame||Z.mozRequestAnimationFrame||Z.oRequestAnimationFrame||function(i){return window.setTimeout(i,i.interval||16.666666666666668)}:It,it=O?Z.cancelAnimationFrame||Z.webkitCancelAnimationFrame||Z.mozCancelAnimationFrame||Z.oCancelAnimationFrame||function(i){window.clearTimeout(i)}:It,zt=function(i){},bt={enumerable:!0,configurable:!0,get:zt,set:zt},q=function(){function i(t){this.events={},this.eventTypes={},this.registerType(t)}return i.prototype.on=function(t,e,o){return void 0===o&&(o=this),this.hasType(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,o]),this},i.prototype.once=function(t,e,o){var n=this;void 0===o&&(o=this),this.hasType(t);var a=function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];n.off(t,a);var T=e.apply(o,h);if(!0===T)return T};return a.fn=e,this.on(t,a),this},i.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this.hasType(t),!e)return this.events[t]=[],this;var o=this.events[t];if(!o)return this;for(var n=o.length;n--;)(o[n][0]===e||o[n][0]&&o[n][0].fn===e)&&o.splice(n,1);return this}},i.prototype.trigger=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.hasType(t);var n=this.events[t];if(n)for(var m,a=n.length,h=g(n),T=0;T<a;T++){var k=h[T],L=k[0];if(L&&!0===(m=L.apply(k[1],e)))return m}},i.prototype.registerType=function(t){var e=this;t.forEach(function(o){e.eventTypes[o]=o})},i.prototype.destroy=function(){this.events={},this.eventTypes={}},i.prototype.hasType=function(t){var e=this.eventTypes;e[t]===t||u('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e).map(function(n){return JSON.stringify(n)})+"]")},i}(),dt=function(){function i(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return i.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},i.prototype.addDOMEvents=function(){this.handleDOMEvents(se)},i.prototype.removeDOMEvents=function(){this.handleDOMEvents(ae)},i.prototype.handleDOMEvents=function(t){var e=this,o=this.wrapper;this.events.forEach(function(n){t(o,n.name,e,!!n.capture)})},i.prototype.handleEvent=function(t){var e=t.type;this.events.some(function(o){return o.name===e&&(o.handler(t),!0)})},i}(),Te=function(i){function t(){var e=i.call(this)||this;return e.startX=0,e.startY=0,e.scrollX=!1,e.scrollY=!0,e.freeScroll=!1,e.directionLockThreshold=0,e.eventPassthrough="",e.click=!1,e.dblclick=!1,e.tap="",e.bounce={top:!0,bottom:!0,left:!0,right:!0},e.bounceTime=800,e.momentum=!0,e.momentumLimitTime=300,e.momentumLimitDistance=15,e.swipeTime=2500,e.swipeBounceTime=500,e.deceleration=.0015,e.flickLimitTime=200,e.flickLimitDistance=100,e.resizePolling=60,e.probeType=0,e.stopPropagation=!1,e.preventDefault=!0,e.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},e.tagException={tagName:/^TEXTAREA$/},e.HWCompositing=!0,e.useTransition=!0,e.bindToWrapper=!1,e.bindToTarget=!1,e.disableMouse=xt,e.disableTouch=!xt,e.autoBlur=!0,e.autoEndDistance=5,e.outOfBoundaryDampingFactor=1/3,e.specifiedIndexAsContent=0,e.quadrant=1,e}return y(t,i),t.prototype.merge=function(e){if(!e)return this;for(var o in e)"bounce"!==o?this[o]=e[o]:this.bounce=this.resolveBounce(e[o]);return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&le?" translateZ(1px)":"",this.useTransition=this.useTransition&&ce,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t.prototype.resolveBounce=function(e){var o={top:!0,right:!0,bottom:!0,left:!0};return"object"==typeof e?W(o,e):e?o:{top:!1,right:!1,bottom:!1,left:!1}},t}(function(){return function i(){}}()),Ee=function(){function i(t,e){this.wrapper=t,this.options=e,this.hooks=new q(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return i.prototype.handleDOMEvents=function(){var t=this.options,h=this.wrapper,m=t.bindToWrapper?h:window,T=[],k=[],L=!t.disableTouch,I=!t.disableMouse;t.click&&T.push({name:"click",handler:this.click.bind(this),capture:!0}),L&&(T.push({name:"touchstart",handler:this.start.bind(this)}),k.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),I&&(T.push({name:"mousedown",handler:this.start.bind(this)}),k.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new dt(h,T),this.targetEventRegister=new dt(m,k)},i.prototype.beforeHandler=function(t,e){var o=this.options,n=o.preventDefault,a=o.stopPropagation,h=o.preventDefaultException;({start:function(){return n&&!ct(t.target,h)},end:function(){return n&&!ct(t.target,h)},move:function(){return n}})[e]()&&t.preventDefault(),a&&t.stopPropagation()},i.prototype.setInitiated=function(t){void 0===t&&(t=0),this.initiated=t},i.prototype.start=function(t){var e=wt[t.type];if(!this.initiated||this.initiated===e){if(this.setInitiated(e),ue(t.target,this.options.tagException))return void this.setInitiated();if((2!==e||0===t.button)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,t)){this.beforeHandler(t,"start");var o=t.touches?t.touches[0]:t;this.pointX=o.pageX,this.pointY=o.pageY,this.hooks.trigger(this.hooks.eventTypes.start,t)}}},i.prototype.move=function(t){if(wt[t.type]===this.initiated){this.beforeHandler(t,"move");var e=t.touches?t.touches[0]:t,o=e.pageX-this.pointX,n=e.pageY-this.pointY;if(this.pointX=e.pageX,this.pointY=e.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:o,deltaY:n,e:t})){var a=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,h=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,m=this.pointX-a,T=this.pointY-h,k=this.options.autoEndDistance;(m>document.documentElement.clientWidth-k||T>document.documentElement.clientHeight-k||m<k||T<k)&&this.end(t)}}},i.prototype.end=function(t){wt[t.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(t,"end"),this.hooks.trigger(this.hooks.eventTypes.end,t))},i.prototype.click=function(t){this.hooks.trigger(this.hooks.eventTypes.click,t)},i.prototype.setContent=function(t){t!==this.wrapper&&(this.wrapper=t,this.rebindDOMEvents())},i.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},i.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},i}(),Pt={x:["translateX","px"],y:["translateY","px"]},ke=function(){function i(t){this.setContent(t),this.hooks=new q(["beforeTranslate","translate"])}return i.prototype.getComputedPosition=function(){var e=window.getComputedStyle(this.content,null)[tt.transform].split(")")[0].split(", ");return{x:+(e[12]||e[4])||0,y:+(e[13]||e[5])||0}},i.prototype.translate=function(t){var e=[];Object.keys(t).forEach(function(o){if(Pt[o]){var n=Pt[o][0];n&&e.push(n+"("+t[o]+Pt[o][1]+")")}}),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,e,t),this.style[tt.transform]=e.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,t)},i.prototype.setContent=function(t){this.content!==t&&(this.content=t,this.style=t.style)},i.prototype.destroy=function(){this.hooks.destroy()},i}(),Yt=function(){function i(t,e,o){this.translater=e,this.options=o,this.timer=0,this.hooks=new q(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(t)}return i.prototype.translate=function(t){this.translater.translate(t)},i.prototype.setPending=function(t){this.pending=t},i.prototype.setForceStopped=function(t){this.forceStopped=t},i.prototype.setCallStop=function(t){this.callStopWhenPending=t},i.prototype.setContent=function(t){this.content!==t&&(this.content=t,this.style=t.style,this.stop())},i.prototype.clearTimer=function(){this.timer&&(it(this.timer),this.timer=0)},i.prototype.destroy=function(){this.hooks.destroy(),it(this.timer)},i}(),be=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return y(t,i),t.prototype.startProbe=function(e,o){var n=this,a=e,h=function(){var m=n.translater.getComputedPosition();(function(i,t,e,o){var n=function(k,L){var I=k-L;return I>0?-1:I<0?1:0},a=n(t.x,i.x),h=n(t.y,i.y);return a*(e.x-o.x)<=0&&h*(e.y-o.y)<=0})(e,o,m,a)&&n.hooks.trigger(n.hooks.eventTypes.move,m),n.pending||(n.callStopWhenPending?n.callStopWhenPending=!1:n.hooks.trigger(n.hooks.eventTypes.end,m)),a=m,n.pending&&(n.timer=At(h))};this.callStopWhenPending&&this.setCallStop(!1),it(this.timer),h()},t.prototype.transitionTime=function(e){void 0===e&&(e=0),this.style[tt.transitionDuration]=e+"ms",this.hooks.trigger(this.hooks.eventTypes.time,e)},t.prototype.transitionTimingFunction=function(e){this.style[tt.transitionTimingFunction]=e,this.hooks.trigger(this.hooks.eventTypes.timeFunction,e)},t.prototype.transitionProperty=function(){this.style[tt.transitionProperty]=tt.transform},t.prototype.move=function(e,o,n,a){this.setPending(n>0),this.transitionTimingFunction(a),this.transitionProperty(),this.transitionTime(n),this.translate(o);var h=3===this.options.probeType;n&&h&&this.startProbe(e,o),n||(this._reflow=this.content.offsetHeight,h&&this.hooks.trigger(this.hooks.eventTypes.move,o),this.hooks.trigger(this.hooks.eventTypes.end,o))},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),it(this.timer);var o=this.translater.getComputedPosition(),n=o.x,a=o.y;this.transitionTime(),this.translate({x:n,y:a}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:n,y:a})}return e},t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(Yt),Pe=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return y(t,i),t.prototype.move=function(e,o,n,a){if(!n)return this.translate(o),3===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.move,o),void this.hooks.trigger(this.hooks.eventTypes.end,o);this.animate(e,o,n,a)},t.prototype.animate=function(e,o,n,a){var h=this,m=A(),T=m+n,k=3===this.options.probeType,L=function(){var I=A();if(I>=T)return h.translate(o),k&&h.hooks.trigger(h.hooks.eventTypes.move,o),void h.hooks.trigger(h.hooks.eventTypes.end,o);var X=a(I=(I-m)/n),K={};Object.keys(o).forEach(function(H){var re=e[H];K[H]=(o[H]-re)*X+re}),h.translate(K),k&&h.hooks.trigger(h.hooks.eventTypes.move,K),h.pending&&(h.timer=At(L)),h.pending||(h.callStopWhenPending?h.callStopWhenPending=!1:h.hooks.trigger(h.hooks.eventTypes.end,o))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),it(this.timer),L()},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),it(this.timer);var o=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,o)}return e},t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(Yt),Wt=function(){function i(t,e,o){this.wrapper=t,this.options=o,this.hooks=new q(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(e)}return i.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},i.prototype.move=function(t){return this.setMovingDirection(t=this.hasScroll?t:0),this.performDampingAlgorithm(t,this.options.outOfBoundaryDampingFactor)},i.prototype.setMovingDirection=function(t){this.movingDirection=t>0?-1:t<0?1:0},i.prototype.setDirection=function(t){this.direction=t>0?-1:t<0?1:0},i.prototype.performDampingAlgorithm=function(t,e){var o=this.currentPos+t;return(o>this.minScrollPos||o<this.maxScrollPos)&&(o=o>this.minScrollPos&&this.options.bounces[0]||o<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+t*e:o>this.minScrollPos?this.minScrollPos:this.maxScrollPos),o},i.prototype.end=function(t){var e={duration:0},o=Math.abs(this.currentPos-this.startPos);return this.options.momentum&&t<this.options.momentumLimitTime&&o>this.options.momentumLimitDistance?e=this.hasScroll?this.momentum(this.currentPos,this.startPos,t,this.maxScrollPos,this.minScrollPos,-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0,this.options):{destination:this.currentPos,duration:0}:this.hooks.trigger(this.hooks.eventTypes.end,e),e},i.prototype.momentum=function(t,e,o,n,a,h,m){void 0===m&&(m=this.options);var T=t-e,k=Math.abs(T)/o,L=m.deceleration,I=m.swipeBounceTime,H={destination:t+k*k/L*(T<0?-1:1),duration:Math.min(m.swipeTime,2*k/L),rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,H,T),H.destination<n?(H.destination=h?Math.max(n-h/4,n-h/H.rate*k):n,H.duration=I):H.destination>a&&(H.destination=h?Math.min(a+h/4,a+h/H.rate*k):a,H.duration=I),H.destination=Math.round(H.destination),H},i.prototype.updateDirection=function(){this.setDirection(this.currentPos-this.absStartPos)},i.prototype.refresh=function(t){var e=this.options.rect,o=e.size,n=e.position,a="static"===window.getComputedStyle(this.wrapper,null).position,h=Bt(this.wrapper);this.wrapperSize=this.wrapper["width"===o?"clientWidth":"clientHeight"],this.setContent(t);var m=Bt(this.content);this.contentSize=m[o],this.relativeOffset=m[n],a&&(this.relativeOffset-=h[n]),this.computeBoundary(),this.setDirection(0)},i.prototype.setContent=function(t){t!==this.content&&(this.content=t,this.resetState())},i.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},i.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var t={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};t.maxScrollPos<0&&(t.maxScrollPos-=this.relativeOffset,0===this.options.specifiedIndexAsContent&&(t.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,t),this.minScrollPos=t.minScrollPos,this.maxScrollPos=t.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},i.prototype.updatePosition=function(t){this.currentPos=t},i.prototype.getCurrentPos=function(){return this.currentPos},i.prototype.checkInBoundary=function(){var t=this.adjustPosition(this.currentPos);return{position:t,inBoundary:t===this.getCurrentPos()}},i.prototype.adjustPosition=function(t){return this.hasScroll||this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?t>this.minScrollPos?t=this.minScrollPos:t<this.maxScrollPos&&(t=this.maxScrollPos):t=this.minScrollPos,t},i.prototype.updateStartPos=function(){this.startPos=this.currentPos},i.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},i.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},i.prototype.getAbsDist=function(t){return this.dist+=t,Math.abs(this.dist)},i.prototype.destroy=function(){this.hooks.destroy()},i}(),Rt=((vt={}).yes=function(i){return!0},vt.no=function(i){return Mt(i),!1},vt),_e=((mt={}).horizontal=((gt={}).yes="horizontal",gt.no="vertical",gt),mt.vertical=((yt={}).yes="vertical",yt.no="horizontal",yt),mt),Ce=function(){function i(t,e,o){this.directionLockThreshold=t,this.freeScroll=e,this.eventPassthrough=o,this.reset()}return i.prototype.reset=function(){this.directionLocked=""},i.prototype.checkMovingDirection=function(t,e,o){return this.computeDirectionLock(t,e),this.handleEventPassthrough(o)},i.prototype.adjustDelta=function(t,e){return"horizontal"===this.directionLocked?e=0:"vertical"===this.directionLocked&&(t=0),{deltaX:t,deltaY:e}},i.prototype.computeDirectionLock=function(t,e){""===this.directionLocked&&!this.freeScroll&&(this.directionLocked=t>e+this.directionLockThreshold?"horizontal":e>=t+this.directionLockThreshold?"vertical":"none")},i.prototype.handleEventPassthrough=function(t){var e=_e[this.directionLocked];if(e){if(this.eventPassthrough===e.yes)return Rt.yes(t);if(this.eventPassthrough===e.no)return Rt.no(t)}return!1},i}(),Oe=function(){function i(t,e,o,n,a){this.hooks=new q(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=t,this.scrollBehaviorY=e,this.actionsHandler=o,this.animater=n,this.options=a,this.directionLockAction=new Ce(a.directionLockThreshold,a.freeScroll,a.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return i.prototype.bindActionsHandler=function(){var t=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,function(e){return!t.enabled||t.handleStart(e)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,function(e){var a=e.e;if(!t.enabled)return!0;var h=function(i,t,e){return 2===e?[t,-i]:3===e?[-i,-t]:4===e?[-t,i]:[i,t]}(e.deltaX,e.deltaY,t.options.quadrant),k={deltaX:h[0],deltaY:h[1]};return t.hooks.trigger(t.hooks.eventTypes.coordinateTransformation,k),t.handleMove(k.deltaX,k.deltaY,a)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,function(e){return!t.enabled||t.handleEnd(e)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,function(e){t.enabled&&!e._constructed&&t.handleClick(e)})},i.prototype.handleStart=function(t){var e=A();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=e,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,t)},i.prototype.handleMove=function(t,e,o){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,o)){var n=this.scrollBehaviorX.getAbsDist(t),a=this.scrollBehaviorY.getAbsDist(e),h=A();if(this.checkMomentum(n,a,h))return!0;if(this.directionLockAction.checkMovingDirection(n,a,o))return this.actionsHandler.setInitiated(),!0;var m=this.directionLockAction.adjustDelta(t,e),T=this.scrollBehaviorX.getCurrentPos(),k=this.scrollBehaviorX.move(m.deltaX),L=this.scrollBehaviorY.getCurrentPos(),I=this.scrollBehaviorY.move(m.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var X=k!==T||I!==L;!this.contentMoved&&!X&&this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&X&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&X&&(this.animater.translate({x:k,y:I}),this.dispatchScroll(h))}}},i.prototype.dispatchScroll=function(t){t-this.startTime>this.options.momentumLimitTime&&(this.startTime=t,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},i.prototype.checkMomentum=function(t,e,o){return o-this.endTime>this.options.momentumLimitTime&&e<this.options.momentumLimitDistance&&t<this.options.momentumLimitDistance},i.prototype.handleEnd=function(t){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,t)){var e=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,t,e))return!0;e=this.ensureIntegerPos(e),this.animater.translate(e),this.endTime=A(),this.hooks.trigger(this.hooks.eventTypes.scrollEnd,e,this.endTime-this.startTime)}},i.prototype.ensureIntegerPos=function(t){this.ensuringInteger=!0;var e=t.x,o=t.y,n=this.scrollBehaviorX,a=n.minScrollPos,h=n.maxScrollPos,m=this.scrollBehaviorY,T=m.minScrollPos,k=m.maxScrollPos;return e=e>0?Math.ceil(e):Math.floor(e),o=o>0?Math.ceil(o):Math.floor(o),{x:e=J(e,h,a),y:o=J(o,k,T)}},i.prototype.handleClick=function(t){ct(t.target,this.options.preventDefaultException)||(Mt(t),t.stopPropagation())},i.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},i.prototype.refresh=function(){this.endTime=0},i.prototype.destroy=function(){this.hooks.destroy()},i}();function Ft(i,t,e,o){var n=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce(function(a,h){return a[h]=i[h],a},{});return n.scrollable=!!i[t],n.bounces=e,n.rect=o,n}function St(i,t,e){e.forEach(function(o){var n,a;"string"==typeof o?n=a=o:(n=o.source,a=o.target),i.on(n,function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];return t.trigger.apply(t,g([a],h))})})}var Be=function(){function i(t,e,o){this.wrapper=t,this.content=e,this.resizeTimeout=0,this.hooks=new q(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=o;var n=this.options.bounce,m=n.top,T=n.bottom;this.scrollBehaviorX=new Wt(t,e,Ft(o,"scrollX",[n.left,n.right],{size:"width",position:"left"})),this.scrollBehaviorY=new Wt(t,e,Ft(o,"scrollY",[m,T],{size:"height",position:"top"})),this.translater=new ke(this.content),this.animater=function Se(i,t,e){var o=e.useTransition,n={};return Object.defineProperty(n,"probeType",{enumerable:!0,configurable:!1,get:function(){return e.probeType}}),o?new be(i,t,n):new Pe(i,t,n)}(this.content,this.translater,this.options),this.actionsHandler=new Ee(this.options.bindToTarget?this.content:t,function De(i){return["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce(function(e,o){return e[o]=i[o],e},{})}(this.options)),this.actions=new Oe(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var k=this.resize.bind(this);this.resizeRegister=new dt(window,[{name:"orientationchange",handler:k},{name:"resize",handler:k}]),this.registerTransitionEnd(),this.init()}return i.prototype.init=function(){var t=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,function(){t.togglePointerEvents(!0)})},i.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new dt(this.content,[{name:tt.transitionEnd,handler:this.transitionEnd.bind(this)}])},i.prototype.bindTranslater=function(){var t=this,e=this.translater.hooks;e.on(e.eventTypes.beforeTranslate,function(o){t.options.translateZ&&o.push(t.options.translateZ)}),e.on(e.eventTypes.translate,function(o){var n=t.getCurrentPos();t.updatePositions(o),!0!==t.actions.ensuringInteger?(o.x!==n.x||o.y!==n.y)&&t.togglePointerEvents(!1):t.actions.ensuringInteger=!1})},i.prototype.bindAnimater=function(){var t=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,function(e){t.resetPosition(t.options.bounceTime)||(t.animater.setPending(!1),t.hooks.trigger(t.hooks.eventTypes.scrollEnd,e))}),St(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},i.prototype.bindActions=function(){var t=this,e=this.actions;St(e.hooks,this.hooks,[{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:e.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:e.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:e.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:e.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),e.hooks.on(e.hooks.eventTypes.end,function(o,n){return t.hooks.trigger(t.hooks.eventTypes.touchEnd,n),!!(t.hooks.trigger(t.hooks.eventTypes.end,n)||!e.fingerMoved&&(t.hooks.trigger(t.hooks.eventTypes.scrollCancel),t.checkClick(o)))||(t.resetPosition(t.options.bounceTime,et.bounce)?(t.animater.setForceStopped(!1),!0):void 0)}),e.hooks.on(e.hooks.eventTypes.scrollEnd,function(o,n){var a=Math.abs(o.x-t.scrollBehaviorX.startPos),h=Math.abs(o.y-t.scrollBehaviorY.startPos);if(t.checkFlick(n,a,h))return t.animater.setForceStopped(!1),void t.hooks.trigger(t.hooks.eventTypes.flick);t.momentum(o,n)?t.animater.setForceStopped(!1):(e.contentMoved&&t.hooks.trigger(t.hooks.eventTypes.scrollEnd,o),t.animater.forceStopped&&t.animater.setForceStopped(!1))})},i.prototype.checkFlick=function(t,e,o){if(this.hooks.events.flick.length>1&&t<this.options.flickLimitTime&&e<this.options.flickLimitDistance&&o<this.options.flickLimitDistance&&(o>1||e>1))return!0},i.prototype.momentum=function(t,e){var o={time:0,easing:et.swiper,newX:t.x,newY:t.y},n=this.scrollBehaviorX.end(e),a=this.scrollBehaviorY.end(e);if(o.newX=F(n.destination)?o.newX:n.destination,o.newY=F(a.destination)?o.newY:a.destination,o.time=Math.max(n.duration,a.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,o,this),o.newX!==t.x||o.newY!==t.y)return(o.newX>this.scrollBehaviorX.minScrollPos||o.newX<this.scrollBehaviorX.maxScrollPos||o.newY>this.scrollBehaviorY.minScrollPos||o.newY<this.scrollBehaviorY.maxScrollPos)&&(o.easing=et.swipeBounce),this.scrollTo(o.newX,o.newY,o.time,o.easing),!0},i.prototype.checkClick=function(t){var e_preventClick=this.animater.forceStopped;if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!e_preventClick){var o=this.options.dblclick,n=!1;if(o&&this.lastClickTime){var a=o.delay,h=void 0===a?300:a;A()-this.lastClickTime<h&&(n=!0,function pe(i){Lt(i,"dblclick")}(t))}return this.options.tap&&function fe(i,t){var e=document.createEvent("Event");e.initEvent(t,!0,!0),e.pageX=i.pageX,e.pageY=i.pageY,i.target.dispatchEvent(e)}(t,this.options.tap),this.options.click&&!ct(t.target,this.options.preventDefaultException)&&Lt(t),this.lastClickTime=n?null:A(),!0}return!1},i.prototype.resize=function(){var t=this;this.actions.enabled&&(r&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(function(){t.hooks.trigger(t.hooks.eventTypes.resize)},this.options.resizePolling))},i.prototype.transitionEnd=function(t){t.target===this.content&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,et.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos())))},i.prototype.togglePointerEvents=function(t){void 0===t&&(t=!0);for(var e=this.content.children.length?this.content.children:[this.content],o=t?"auto":"none",n=0;n<e.length;n++){var a=e[n];a.isBScrollContainer||(a.style.pointerEvents=o)}},i.prototype.refresh=function(t){var e=this.setContent(t);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(t),this.scrollBehaviorY.refresh(t),e&&(this.translater.setContent(t),this.animater.setContent(t),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(t)),this.actions.refresh(),this.wrapperOffset=Ot(this.wrapper)},i.prototype.setContent=function(t){var e=t!==this.content;return e&&(this.content=t),e},i.prototype.scrollBy=function(t,e,o,n){void 0===o&&(o=0);var a=this.getCurrentPos();this.scrollTo(t+=a.x,e+=a.y,o,n=n||et.bounce)},i.prototype.scrollTo=function(t,e,o,n,a){void 0===o&&(o=0),void 0===n&&(n=et.bounce),void 0===a&&(a={start:{},end:{}});var h=this.options.useTransition?n.style:n.fn,m=this.getCurrentPos(),T=p({x:m.x,y:m.y},a.start),k=p({x:t,y:e},a.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,k),!function xe(i,t){for(var o=0,n=Object.keys(i);o<n.length;o++){var a=n[o];if(i[a]!==t[a])return!1}return!0}(T,k)){var L=Math.abs(k.x-T.x),I=Math.abs(k.y-T.y);L<1&&I<1&&(o=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(T,k,o,h)}},i.prototype.scrollToElement=function(t,e,o,n,a){var h=lt(t),m=Ot(h),T=function(L,I,X){return"number"==typeof L?L:L?Math.round(I/2-X/2):0};o=T(o,h.offsetWidth,this.wrapper.offsetWidth),n=T(n,h.offsetHeight,this.wrapper.offsetHeight);var k=function(L,I,X,K){return K.adjustPosition((L-=I)-X)};m.left=k(m.left,this.wrapperOffset.left,o,this.scrollBehaviorX),m.top=k(m.top,this.wrapperOffset.top,n,this.scrollBehaviorY),!this.hooks.trigger(this.hooks.eventTypes.scrollToElement,h,m)&&this.scrollTo(m.left,m.top,e,a)},i.prototype.resetPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=et.bounce);var o=this.scrollBehaviorX.checkInBoundary(),n=o.position,a=o.inBoundary,h=this.scrollBehaviorY.checkInBoundary(),m=h.position;return!(a&&h.inBoundary||(s&&this.reflow(),this.scrollTo(n,m,t,e),0))},i.prototype.reflow=function(){this._reflow=this.content.offsetHeight},i.prototype.updatePositions=function(t){this.scrollBehaviorX.updatePosition(t.x),this.scrollBehaviorY.updatePosition(t.y)},i.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},i.prototype.enable=function(){this.actions.enabled=!0},i.prototype.disable=function(){it(this.animater.timer),this.actions.enabled=!1},i.prototype.destroy=function(){var t=this;["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"].forEach(function(o){return t[o].destroy()})},i}(),Tt=function(i){function t(e,o){var n=i.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,a=lt(e);return a?(n.plugins={},n.options=(new Te).merge(o).process(),n.setContent(a).valid&&(n.hooks=new q(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),n.init(a)),n):(u("Can not resolve the wrapper DOM."),n)}return y(t,i),t.use=function(e){var o=e.pluginName;return t.plugins.some(function(a){return e===a.ctor})?t:F(o)?(u("Plugin Class must specify plugin's name in static property by 'pluginName' field."),t):(t.pluginsMap[o]=!0,t.plugins.push({name:o,applyOrder:e.applyOrder,ctor:e}),t)},t.prototype.setContent=function(e){var o=!1,n=!0,a=e.children[this.options.specifiedIndexAsContent];return a?(o=this.content!==a)&&(this.content=a):(u("The wrapper need at least one child element to be content element to scroll."),n=!1),{valid:n,contentChanged:o}},t.prototype.init=function(e){var o=this;this.wrapper=e,e.isBScrollContainer=!0,this.scroller=new Be(e,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,function(){o.refresh()}),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(d),this.applyPlugins(),this.refreshWithoutReset(this.content);var n=this.options,m={x:n.startX,y:n.startY};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,m)||this.scroller.scrollTo(m.x,m.y)},t.prototype.applyPlugins=function(){var e=this,o=this.options;t.plugins.sort(function(n,a){var h,m=((h={}).pre=-1,h.post=1,h);return(n.applyOrder?m[n.applyOrder]:0)-(a.applyOrder?m[a.applyOrder]:0)}).forEach(function(n){var a=n.ctor;o[n.name]&&"function"==typeof a&&(e.plugins[n.name]=new a(e))})},t.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,function(){var e=document.activeElement;e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName)&&e.blur()})},t.prototype.eventBubbling=function(){St(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},t.prototype.refreshWithoutReset=function(e){this.scroller.refresh(e),this.hooks.trigger(this.hooks.eventTypes.refresh,e),this.trigger(this.eventTypes.refresh,e)},t.prototype.proxy=function(e){var o=this;e.forEach(function(n){!function ge(i,t,e){bt.get=function(){return function(i,t){for(var e=t.split("."),o=0;o<e.length-1;o++)if("object"!=typeof(i=i[e[o]])||!i)return;var n=e.pop();return"function"==typeof i[n]?function(){return i[n].apply(i,arguments)}:i[n]}(this,t)},bt.set=function(n){!function(i,t,e){for(var n,o=t.split("."),a=0;a<o.length-1;a++)i[n=o[a]]||(i[n]={}),i=i[n];i[o.pop()]=e}(this,t,n)},Object.defineProperty(i,e,bt)}(o,n.sourceKey,n.key)})},t.prototype.refresh=function(){var e=this.setContent(this.wrapper),o=e.contentChanged;if(e.valid){var a=this.content;this.refreshWithoutReset(a),o&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,a),this.trigger(this.eventTypes.contentChanged,a)),this.scroller.resetPosition()}},t.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},t.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},t.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},t.prototype.eventRegister=function(e){this.registerType(e)},t.plugins=[],t.pluginsMap={},t}(q);function Et(i,t){return new Tt(i,t)}Et.use=Tt.use,Et.plugins=Tt.plugins,Et.pluginsMap=Tt.pluginsMap;var kt=Et,ut=typeof window<"u",ot=ut&&navigator.userAgent.toLowerCase();if(ot&&/wechatdevtools/.test(ot),ot&&ot.indexOf("android"),function(){if("string"==typeof ot){var t=/os (\d\d?_\d(_\d)?)/.exec(ot);if(!t)return!1;var e=t[1].split("_").map(function(o){return parseInt(o,10)})}}(),ut)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){}}),window.addEventListener("test-passive",function(){},Xt)}catch{}var Nt=ut&&document.createElement("div").style,nt=function(){if(!ut)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var o=e[t];if(void 0!==Nt[o.value])return o.key}return!1}();function G(i){return!1===nt?i:"standard"===nt?"transitionEnd"===i?"transitionend":i:nt+i.charAt(0).toUpperCase()+i.substr(1)}nt&&"standard"!==nt&&nt.toLowerCase(),G("transform"),G("transition"),ut&&G("perspective"),G("transitionTimingFunction"),G("transitionDuration"),G("transitionDelay"),G("transformOrigin"),G("transitionEnd"),G("transitionProperty");var _t_bounce={style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(i){return 1- --i*i*i*i}},Fe=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}].map(function(i){return{key:i.key,sourceKey:"plugins.pullDownRefresh."+i.name}}),Ct="pullingDown",Ut="enterThreshold",Kt="leaveThreshold",He=function(){function i(t){this.scroll=t,this.pulling=0,this.thresholdBoundary=0,this.init()}return i.prototype.setPulling=function(t){this.pulling=t},i.prototype.setThresholdBoundary=function(t){this.thresholdBoundary=t},i.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},i.prototype.handleBScroll=function(){this.scroll.registerType([Ct,Ut,Kt]),this.scroll.proxy(Fe)},i.prototype.handleOptions=function(t){void 0===t&&(t={}),this.options=function(i,t){for(var e in t)i[e]=t[e];return i}({threshold:90,stop:40},t=!0===t?{}:t),this.scroll.options.probeType=3},i.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller,o=e.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=o.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){t.finishPullDown()}),this.registerHooks(o.hooks,o.hooks.eventTypes.computeBoundary,function(n){n.maxScrollPos>0&&(n.maxScrollPos=-1),n.minScrollPos=t.currentMinScrollY}),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,function(n){n.discreteTime=300,n.easeTime=350}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(){e.hooks.trigger(e.hooks.eventTypes.end)}))},i.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},i.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},i.prototype.watch=function(){var t=this.scroll.scroller;this.watching=!0,this.registerHooks(t.hooks,t.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},i.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},i.prototype.checkLocationOfThresholdBoundary=function(){if(1===this.pulling){var t=this.scroll,e=1!==this.thresholdBoundary&&this.locateInsideThresholdBoundary(),o=2!==this.thresholdBoundary&&!this.locateInsideThresholdBoundary();e&&(this.setThresholdBoundary(1),t.trigger(Ut)),o&&(this.setThresholdBoundary(2),t.trigger(Kt))}},i.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},i.prototype.unwatch=function(){var t=this.scroll,e=t.scroller;this.watching=!1,e.hooks.off(e.hooks.eventTypes.end,this.checkPullDown),t.off(t.eventTypes.scrollStart,this.resetStateBeforeScrollStart),t.off(t.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&t.off(t.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},i.prototype.checkPullDown=function(){var t=this.options,o=t.stop;return!(this.scroll.y<t.threshold)&&(1===this.pulling&&(this.modifyBehaviorYBoundary(o),this.setPulling(2),this.scroll.trigger(Ct)),this.scroll.scrollTo(this.scroll.x,o,this.scroll.options.bounceTime,_t_bounce),this.isFetchingStatus())},i.prototype.isFetchingStatus=function(){return 2===this.pulling},i.prototype.modifyBehaviorYBoundary=function(t){var e=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=e.minScrollPos,this.currentMinScrollY=t,e.computeBoundary()},i.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var t=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,t.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,_t_bounce)}},i.prototype.openPullDown=function(t){void 0===t&&(t={}),this.handleOptions(t),this.watching||this.watch()},i.prototype.closePullDown=function(){this.unwatch()},i.prototype.autoPullDownRefresh=function(){var t=this.options,e=t.threshold,o=t.stop;this.isFetchingStatus()||!this.watching||(this.modifyBehaviorYBoundary(o),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,e),this.setPulling(2),this.scroll.trigger(Ct),this.scroll.scrollTo(this.scroll.x,o,this.scroll.options.bounceTime,_t_bounce))},i.pluginName="pullDownRefresh",i}(),ft=typeof window<"u",rt=ft&&navigator.userAgent.toLowerCase();if(rt&&/wechatdevtools/.test(rt),rt&&rt.indexOf("android"),function(){if("string"==typeof rt){var t=/os (\d\d?_\d(_\d)?)/.exec(rt);if(!t)return!1;var e=t[1].split("_").map(function(o){return parseInt(o,10)})}}(),ft)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){}}),window.addEventListener("test-passive",function(){},Gt)}catch{}var $t=ft&&document.createElement("div").style,st=function(){if(!ft)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var o=e[t];if(void 0!==$t[o.value])return o.key}return!1}();function V(i){return!1===st?i:"standard"===st?"transitionEnd"===i?"transitionend":i:st+i.charAt(0).toUpperCase()+i.substr(1)}st&&"standard"!==st&&st.toLowerCase(),V("transform"),V("transition"),ft&&V("perspective"),V("transitionTimingFunction"),V("transitionDuration"),V("transitionDelay"),V("transformOrigin"),V("transitionEnd"),V("transitionProperty");var je=[{key:"finishPullUp",name:"finishPullUp"},{key:"openPullUp",name:"openPullUp"},{key:"closePullUp",name:"closePullUp"},{key:"autoPullUpLoad",name:"autoPullUpLoad"}].map(function(i){return{key:i.key,sourceKey:"plugins.pullUpLoad."+i.name}}),Vt="pullingUp",Qe=function(){function i(t){this.scroll=t,this.pulling=!1,this.watching=!1,this.init()}return i.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullUpLoad),this.handleHooks(),this.watch()},i.prototype.handleBScroll=function(){this.scroll.registerType([Vt]),this.scroll.proxy(je)},i.prototype.handleOptions=function(t){void 0===t&&(t={}),this.options=function(i,t){for(var e in t)i[e]=t[e];return i}({threshold:0},t=!0===t?{}:t),this.scroll.options.probeType=3},i.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller.scrollBehaviorY;this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){t.finishPullUp()}),this.registerHooks(e.hooks,e.hooks.eventTypes.computeBoundary,function(o){o.maxScrollPos>0&&(o.maxScrollPos=-1)})},i.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},i.prototype.watch=function(){this.watching||(this.watching=!0,this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkPullUp))},i.prototype.unwatch=function(){this.watching=!1,this.scroll.off(this.scroll.eventTypes.scroll,this.checkPullUp)},i.prototype.checkPullUp=function(t){var e=this;1===this.scroll.movingDirectionY&&t.y<=this.scroll.maxScrollY+this.options.threshold&&(this.pulling=!0,this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){e.pulling=!1}),this.unwatch(),this.scroll.trigger(Vt))},i.prototype.finishPullUp=function(){var t=this;this.scroll.scroller.scrollBehaviorY.setMovingDirection(0),this.pulling?this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){t.watch()}):this.watch()},i.prototype.openPullUp=function(t){void 0===t&&(t={}),this.handleOptions(t),this.watch()},i.prototype.closePullUp=function(){this.unwatch()},i.prototype.autoPullUpLoad=function(){if(!this.pulling&&this.watching){var n=this.scroll.scroller.scrollBehaviorY.maxScrollPos+this.options.threshold+-1;this.scroll.scroller.scrollBehaviorY.setMovingDirection(-1),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime)}},i.pluginName="pullUpLoad",i}(),pt=typeof window<"u",at=pt&&navigator.userAgent.toLowerCase();at&&/wechatdevtools/.test(at),at&&at.indexOf("android"),function(){if("string"==typeof at){var t=/os (\d\d?_\d(_\d)?)/.exec(at);if(!t)return!1;var e=t[1].split("_").map(function(o){return parseInt(o,10)})}}();var jt=!1;if(pt)try{var Qt={};Object.defineProperty(Qt,"passive",{get:function(){jt=!0}}),window.addEventListener("test-passive",function(){},Qt)}catch{}var Zt=pt&&document.createElement("div").style,ht=function(){if(!pt)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var o=e[t];if(void 0!==Zt[o.value])return o.key}return!1}();function j(i){return!1===ht?i:"standard"===ht?"transitionEnd"===i?"transitionend":i:ht+i.charAt(0).toUpperCase()+i.substr(1)}function ti(i,t,e,o){i.addEventListener(t,e,jt?{passive:!1,capture:!!o}:!!o)}function ei(i,t,e,o){i.removeEventListener(t,e,{capture:!!o})}ht&&"standard"!==ht&&ht.toLowerCase(),j("transform"),j("transition"),pt&&j("perspective"),j("transitionTimingFunction"),j("transitionDuration"),j("transitionDelay"),j("transformOrigin"),j("transitionEnd"),j("transitionProperty");var si=function(){function i(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return i.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},i.prototype.addDOMEvents=function(){this.handleDOMEvents(ti)},i.prototype.removeDOMEvents=function(){this.handleDOMEvents(ei)},i.prototype.handleDOMEvents=function(t){var e=this,o=this.wrapper;this.events.forEach(function(n){t(o,n.name,e,!!n.capture)})},i.prototype.handleEvent=function(t){var e=t.type;this.events.some(function(o){return o.name===e&&(o.handler(t),!0)})},i}(),ai=function(){function i(t){this.scroll=t,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return i.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},i.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},i.prototype.handleOptions=function(){this.mouseWheelOpt=function(i,t){for(var e in t)i[e]=t[e];return i}({speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1},!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel)},i.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},i.prototype.registerEvent=function(){this.eventRegister=new si(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},i.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},i.prototype.wheelHandler=function(t){if(this.scroll.enabled){this.beforeHandler(t),this.wheelStart||(this.wheelStartHandler(t),this.wheelStart=!0);var e=this.getWheelDelta(t);this.wheelMoveHandler(e),this.wheelEndDetector(e)}},i.prototype.wheelStartHandler=function(t){this.cleanCache();var e=this.scroll.scroller,o=e.scrollBehaviorX,n=e.scrollBehaviorY;o.setMovingDirection(0),n.setMovingDirection(0),o.setDirection(0),n.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},i.prototype.cleanCache=function(){this.deltaCache=[]},i.prototype.wheelMoveHandler=function(t){var e=this,o=this.mouseWheelOpt,n=o.throttleTime,a=o.dampingFactor;if(n&&this.wheelMoveTimer)this.deltaCache.push(t);else{var h=this.deltaCache.reduce(function(K,H){return{x:K.x+H.x,y:K.y+H.y}},{x:0,y:0});this.cleanCache();var m=this.scroll.scroller,T=m.scrollBehaviorX,k=m.scrollBehaviorY;T.setMovingDirection(-t.directionX),k.setMovingDirection(-t.directionY),T.setDirection(t.x),k.setDirection(t.y);var L=T.performDampingAlgorithm(Math.round(t.x)+h.x,a),I=k.performDampingAlgorithm(Math.round(t.y)+h.x,a);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:L,y:I})){var X=this.getEaseTime();(L!==this.scroll.x||I!==this.scroll.y)&&this.scroll.scrollTo(L,I,X)}n&&(this.wheelMoveTimer=window.setTimeout(function(){e.wheelMoveTimer=0},n))}},i.prototype.wheelEndDetector=function(t){var e=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){e.wheelStart=!1,window.clearTimeout(e.wheelMoveTimer),e.wheelMoveTimer=0,e.scroll.trigger(e.scroll.eventTypes.mousewheelEnd,t)},this.mouseWheelOpt.discreteTime)},i.prototype.getWheelDelta=function(t){var e=this.mouseWheelOpt,o=e.speed,a=0,h=0,m=e.invert?-1:1;switch(!0){case"deltaX"in t:1===t.deltaMode?(a=-t.deltaX*o,h=-t.deltaY*o):(a=-t.deltaX,h=-t.deltaY);break;case"wheelDeltaX"in t:a=t.wheelDeltaX/120*o,h=t.wheelDeltaY/120*o;break;case"wheelDelta"in t:a=h=t.wheelDelta/120*o;break;case"detail"in t:a=h=-t.detail/3*o}return a*=m,h*=m,this.scroll.hasVerticalScroll||(Math.abs(h)>Math.abs(a)&&(a=h),h=0),this.scroll.hasHorizontalScroll||(a=0),{x:a,y:h,directionX:a>0?-1:a<0?1:0,directionY:h>0?-1:h<0?1:0}},i.prototype.beforeHandler=function(t){var e=this.scroll.options,n=e.stopPropagation;e.preventDefault&&!function ri(i,t){for(var e in t)if(t[e].test(i[e]))return!0;return!1}(t.target,e.preventDefaultException)&&function ii(i){i.cancelable&&i.preventDefault()}(t),n&&t.stopPropagation()},i.prototype.getEaseTime=function(){var e=this.mouseWheelOpt.easeTime;return e<100&&function Ze(i){console.error("[BScroll warn]: "+i)}("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(e,100)},i.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(t){t[0].off(t[1],t[2])})},i.pluginName="mouseWheel",i.applyOrder="pre",i}(),hi=P(8600),li=P(3768),ci=P(6928),qt=P(2700),Jt=P(5800),te=P(8016),ee=P(9212),ie=P(7680),ui=P(8960),fi=P(5448),oe=P(7773),pi=P(560),di=P(4548);function ne(i){let e,t=1/0;return null!=i&&("object"==typeof i?({count:t=1/0,delay:e}=i):t=i),t<=0?()=>ui.k:(0,fi.i)((o,n)=>{let h,a=0;const m=()=>{if(h?.unsubscribe(),h=null,null!=e){const k="number"==typeof e?(0,di.k)(e):(0,pi.Uv)(e(a)),L=(0,oe.e)(n,()=>{L.unsubscribe(),T()});k.subscribe(L)}else T()},T=()=>{let k=!1;h=o.subscribe((0,oe.e)(n,void 0,()=>{++a<t?h?m():k=!0:n.complete()})),k&&m()};T()})}var vi=P(2356);const mi=["scrollable"],gi=["waterfall"];function yi(i,t){1&i&&(l.I0R(0,"div",7),l.OEk(1,"Refreshing..."),l.C$Y())}function Ti(i,t){if(1&i){const e=l.KQA();l.I0R(0,"div",8),l.qCj("click",function(){const a=l.usT(e).$implicit,h=l.GaO();return l.CGJ(h.show(a))}),l.wR5(1,"img",9),l.I0R(2,"span"),l.OEk(3),l.C$Y()()}if(2&i){const e=t.$implicit;l.yG2(),l.E7m("src",e.links[0],l.K6U),l.yG2(2),l.cNF(e.title)}}function Ei(i,t){1&i&&(l.I0R(0,"div",10),l.OEk(1,"Loading..."),l.C$Y())}kt.use(He),kt.use(Qe),kt.use(ai);const ki=[{path:"",component:(()=>{class i{constructor(e,o,n){this.api=e,this.rxbus=o,this.activatedRoute=n,this.data=[],this.refreshing=!1,this.loading=!1,this.layout=!1,this.subscription=new ci.wH}ngOnInit(){this.scroll=new kt(this.scrollable.nativeElement,{scrollY:!0,pullDownRefresh:!0,pullUpLoad:!0,preventDefaultException:{className:/(^|\s)item(\s|$)/},click:!0,mouseWheel:{speed:20,invert:!1,easeTime:300}}).on("scroll",()=>{!this.loading&&this.waterfall.nativeElement.clientHeight<this.scrollable.nativeElement.clientHeight&&(this.loading=!0,this.api.loadMore().subscribe(e=>{this.data.push(...e),this.loading=!1})),this.rxbus.post("scroll",this.scroll)}).on("pullingDown",()=>this.refresh()).on("pullingUp",()=>{this.api.hasMore()&&(this.loading=!0,this.api.loadMore().subscribe(e=>{this.data.push(...e),this.loading=!1,this.scroll.finishPullUp()}))}),this.masonry=new li(this.waterfall.nativeElement,{itemSelector:".item",hiddenStyle:{transform:"translateY(100px)",opacity:0},visibleStyle:{transform:"translateY(0px)",opacity:1}}),this.mutationObserver=new MutationObserver(e=>{e.some(o=>o.addedNodes.length>0||o.removedNodes.length>0)&&e.forEach(o=>{const n=[];o.addedNodes.forEach(a=>{a.style.display="none",hi(a).on("progress",(h,m)=>{n.push({node:a,image:m}),n.length===o.addedNodes.length&&(n.forEach(T=>{T.image.isLoaded&&(T.node.style.display="")}),this.masonry.appended(n.filter(T=>T.image.isLoaded).map(T=>T.node)),this.layout&&(this.masonry.layout(),this.layout=!1),this.scroll.refresh())})}),o.removedNodes.forEach(a=>{this.masonry.remove(a)})})}),this.mutationObserver.observe(this.waterfall.nativeElement,{childList:!0}),this.scrollObserver=this.rxbus.register("scroll"),this.subscription.add(this.scrollObserver.pipe((0,Jt.U)(1e3),(0,te.s)(e=>(0,qt.of)(e).pipe((0,ee.y)(()=>{$("div.waterfall div.item").each((o,n)=>{const a=this.scrollable.nativeElement;if(n.offsetTop+n.offsetHeight+this.scroll.y+window.screen.height<a.offsetTop||n.offsetTop+this.scroll.y-window.screen.height>a.offsetTop+a.offsetHeight){if(""===n.style.display||"block"===n.style.display){const h=n.children[0];h.style.display="none",n.style.height=`${(h.height*n.offsetWidth/h.width+n.children[1].offsetHeight).toFixed()}px`}}else(""===n.style.display||"block"===n.style.display)&&(n.style.height="",n.children[0].style.display="")})}),(0,ie.o)(500),ne(3)))).subscribe()),this.resizeObserver=this.rxbus.register("resize"),this.subscription.add(this.resizeObserver.pipe((0,Jt.U)(1e3),(0,te.s)(e=>(0,qt.of)(e).pipe((0,ee.y)(()=>{$("div.waterfall div.item").each((o,n)=>{const a=n.children[0];"none"===a.style.display&&(n.style.height=`${(a.height*n.offsetWidth/a.width+n.children[1].offsetHeight).toFixed()}px`)}),this.masonry.layout(),this.scroll.refresh(),this.rxbus.post("scroll",this.scroll)}),(0,ie.o)(500),ne(2)))).subscribe()),this.activatedRoute.params.subscribe(()=>{this.refresh()})}refresh(){this.refreshing=!0,null!=this.refreshSubscription&&!this.refreshSubscription.closed&&this.refreshSubscription.unsubscribe(),this.refreshSubscription=this.api.refresh().subscribe(e=>{this.data=e,this.refreshing=!1,this.layout=!0})}show(e){$.fancybox.open(e.links.map(o=>({src:o})),{arrows:!1,buttons:["download","thumbs","close"]})}ngOnDestroy(){null!=this.masonry&&this.masonry.destroy(),null!=this.scroll&&this.scroll.destroy(),null!=this.mutationObserver&&this.mutationObserver.disconnect(),null!=this.scrollObserver&&this.rxbus.unregister("scroll",this.scrollObserver),null!=this.resizeObserver&&this.rxbus.unregister("resize",this.resizeObserver),this.subscription.unsubscribe()}static#t=this.\u0275fac=function(o){return new(o||i)(l.GI1(D),l.GI1(vi.I),l.GI1(f.gV))};static#e=this.\u0275cmp=l.In1({type:i,selectors:[["app-meizhi"]],viewQuery:function(o,n){if(1&o&&(l.CC$(mi,7),l.CC$(gi,7)),2&o){let a;l.wto(a=l.Gqi())&&(n.scrollable=a.first),l.wto(a=l.Gqi())&&(n.waterfall=a.first)}},decls:9,vars:3,consts:[[1,"container"],["scrollable",""],["class","refreshing",4,"ngIf"],[1,"waterfall"],["waterfall",""],["class","item",3,"click",4,"ngFor","ngForOf"],["class","loading",4,"ngIf"],[1,"refreshing"],[1,"item",3,"click"],[3,"src"],[1,"loading"]],template:function(o,n){1&o&&(l.I0R(0,"div",0)(1,"div",null,1)(3,"div"),l.yuY(4,yi,2,0,"div",2),l.I0R(5,"div",3,4),l.yuY(7,Ti,4,2,"div",5),l.C$Y(),l.yuY(8,Ei,2,0,"div",6),l.C$Y()()()),2&o&&(l.yG2(4),l.E7m("ngIf",n.refreshing),l.yG2(3),l.E7m("ngForOf",n.data),l.yG2(),l.E7m("ngIf",n.loading))},dependencies:[w.ay,w.u_],styles:[".container[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 36px)}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;overflow:hidden}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.waterfall[_ngcontent-%COMP%]{padding:5px}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.waterfall[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:calc(50% - 15px);background:#fff;text-align:center;margin:5px}@media screen and (min-width: 512px){.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.waterfall[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:calc(25% - 12.5px)}}@media screen and (min-width: 1024px){.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.waterfall[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:calc(12.5% - 11.25px)}}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.waterfall[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.waterfall[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:4px 0;font-size:16px;color:#454545}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.refreshing[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.loading[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:16px}"]})}return i})()}];let wi=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=l.a4G({type:i});static#i=this.\u0275inj=l.s3X({imports:[f.qQ.forChild(ki),f.qQ]})}return i})(),bi=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=l.a4G({type:i});static#i=this.\u0275inj=l.s3X({providers:[w.y,D],imports:[w.MD,C.SU,x.y,S.k,wi]})}return i})()},2044:(Y,z,P)=>{var w,C;!function(x,S){"use strict";w=function(){var S=function(){var M=window.Element.prototype;if(M.matches)return"matches";if(M.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],l=0;l<b.length;l++){var f=b[l]+"MatchesSelector";if(M[f])return f}}();return function(b,l){return b[S](l)}},void 0!==(C=w.call(z,P,z,Y))&&(Y.exports=C)}(window)},7312:function(Y){var z,P;z=typeof window<"u"?window:this,P=function(){function z(){}let P=z.prototype;return P.on=function(w,C){if(!w||!C)return this;let x=this._events=this._events||{},S=x[w]=x[w]||[];return S.includes(C)||S.push(C),this},P.once=function(w,C){if(!w||!C)return this;this.on(w,C);let x=this._onceEvents=this._onceEvents||{};return(x[w]=x[w]||{})[C]=!0,this},P.off=function(w,C){let x=this._events&&this._events[w];if(!x||!x.length)return this;let S=x.indexOf(C);return-1!=S&&x.splice(S,1),this},P.emitEvent=function(w,C){let x=this._events&&this._events[w];if(!x||!x.length)return this;x=x.slice(0),C=C||[];let S=this._onceEvents&&this._onceEvents[w];for(let M of x)S&&S[M]&&(this.off(w,M),delete S[M]),M.apply(this,C);return this},P.allOff=function(){return delete this._events,delete this._onceEvents,this},z},Y.exports?Y.exports=P():z.EvEmitter=P()},9976:(Y,z,P)=>{var w,C,x;x=window,w=[P(2044)],void 0!==(C=function(M){return function(S,M){"use strict";var b={extend:function(f,v){for(var y in v)f[y]=v[y];return f},modulo:function(f,v){return(f%v+v)%v}},l=Array.prototype.slice;b.makeArray=function(f){return Array.isArray(f)?f:null==f?[]:"object"==typeof f&&"number"==typeof f.length?l.call(f):[f]},b.removeFrom=function(f,v){var y=f.indexOf(v);-1!=y&&f.splice(y,1)},b.getParent=function(f,v){for(;f.parentNode&&f!=document.body;)if(M(f=f.parentNode,v))return f},b.getQueryElement=function(f){return"string"==typeof f?document.querySelector(f):f},b.handleEvent=function(f){var v="on"+f.type;this[v]&&this[v](f)},b.filterFindElements=function(f,v){f=b.makeArray(f);var y=[];return f.forEach(function(p){if(p instanceof HTMLElement){if(!v)return void y.push(p);M(p,v)&&y.push(p);for(var g=p.querySelectorAll(v),d=0;d<g.length;d++)y.push(g[d])}}),y},b.debounceMethod=function(f,v,y){y=y||100;var p=f.prototype[v],g=v+"Timeout";f.prototype[v]=function(){clearTimeout(this[g]);var u=arguments,O=this;this[g]=setTimeout(function(){p.apply(O,u),delete O[g]},y)}},b.docReady=function(f){var v=document.readyState;"complete"==v||"interactive"==v?setTimeout(f):document.addEventListener("DOMContentLoaded",f)},b.toDashed=function(f){return f.replace(/(.)([A-Z])/g,function(v,y,p){return y+"-"+p}).toLowerCase()};var D=S.console;return b.htmlInit=function(f,v){b.docReady(function(){var y=b.toDashed(v),p="data-"+y,g=document.querySelectorAll("["+p+"]"),d=document.querySelectorAll(".js-"+y),u=b.makeArray(g).concat(b.makeArray(d)),O=p+"-options",_=S.jQuery;u.forEach(function(R){var s,r=R.getAttribute(p)||R.getAttribute(O);try{s=r&&JSON.parse(r)}catch(E){return void(D&&D.error("Error parsing "+p+" on "+R.className+": "+E))}var c=new f(R,s);_&&_.data(R,v,c)})})},b}(x,M)}.apply(z,w))&&(Y.exports=C)},3247:(Y,z,P)=>{var w,C;window,void 0!==(C="function"==typeof(w=function(){"use strict";function S(u){var O=parseFloat(u);return-1==u.indexOf("%")&&!isNaN(O)&&O}var b=typeof console>"u"?function M(){}:function(u){console.error(u)},l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],D=l.length;function v(u){var O=getComputedStyle(u);return O||b("Style returned "+O+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),O}var p,y=!1;function d(u){if(function g(){if(!y){y=!0;var u=document.createElement("div");u.style.width="200px",u.style.padding="1px 2px 3px 4px",u.style.borderStyle="solid",u.style.borderWidth="1px 2px 3px 4px",u.style.boxSizing="border-box";var O=document.body||document.documentElement;O.appendChild(u);var _=v(u);p=200==Math.round(S(_.width)),d.isBoxSizeOuter=p,O.removeChild(u)}}(),"string"==typeof u&&(u=document.querySelector(u)),u&&"object"==typeof u&&u.nodeType){var O=v(u);if("none"==O.display)return function f(){for(var u={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},O=0;O<D;O++)u[l[O]]=0;return u}();var _={};_.width=u.offsetWidth,_.height=u.offsetHeight;for(var R=_.isBorderBox="border-box"==O.boxSizing,r=0;r<D;r++){var s=l[r],E=parseFloat(O[s]);_[s]=isNaN(E)?0:E}var B=_.paddingLeft+_.paddingRight,A=_.paddingTop+_.paddingBottom,W=_.marginLeft+_.marginRight,F=_.marginTop+_.marginBottom,J=_.borderLeftWidth+_.borderRightWidth,Q=_.borderTopWidth+_.borderBottomWidth,U=R&&p,N=S(O.width);!1!==N&&(_.width=N+(U?0:B+J));var lt=S(O.height);return!1!==lt&&(_.height=lt+(U?0:A+Q)),_.innerWidth=_.width-(B+J),_.innerHeight=_.height-(A+Q),_.outerWidth=_.width+W,_.outerHeight=_.height+F,_}}return d})?w.call(z,P,z,Y):w)&&(Y.exports=C)},8600:function(Y,z,P){var w,C;w=typeof window<"u"?window:this,C=function(C,x){let S=C.jQuery,M=C.console;function l(p,g,d){if(!(this instanceof l))return new l(p,g,d);let u=p;"string"==typeof p&&(u=document.querySelectorAll(p)),u?(this.elements=function b(p){return Array.isArray(p)?p:"object"==typeof p&&"number"==typeof p.length?[...p]:[p]}(u),this.options={},"function"==typeof g?d=g:Object.assign(this.options,g),d&&this.on("always",d),this.getImages(),S&&(this.jqDeferred=new S.Deferred),setTimeout(this.check.bind(this))):M.error(`Bad element for imagesLoaded ${u||p}`)}(l.prototype=Object.create(x.prototype)).getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};const D=[1,9,11];l.prototype.addElementImages=function(p){"IMG"===p.nodeName&&this.addImage(p),!0===this.options.background&&this.addElementBackgroundImages(p);let{nodeType:g}=p;if(!g||!D.includes(g))return;let d=p.querySelectorAll("img");for(let u of d)this.addImage(u);if("string"==typeof this.options.background){let u=p.querySelectorAll(this.options.background);for(let O of u)this.addElementBackgroundImages(O)}};const f=/url\((['"])?(.*?)\1\)/gi;function v(p){this.img=p}function y(p,g){this.url=p,this.element=g,this.img=new Image}return l.prototype.addElementBackgroundImages=function(p){let g=getComputedStyle(p);if(!g)return;let d=f.exec(g.backgroundImage);for(;null!==d;){let u=d&&d[2];u&&this.addBackground(u,p),d=f.exec(g.backgroundImage)}},l.prototype.addImage=function(p){let g=new v(p);this.images.push(g)},l.prototype.addBackground=function(p,g){let d=new y(p,g);this.images.push(d)},l.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();let p=(g,d,u)=>{setTimeout(()=>{this.progress(g,d,u)})};this.images.forEach(function(g){g.once("progress",p),g.check()})},l.prototype.progress=function(p,g,d){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!p.isLoaded,this.emitEvent("progress",[this,p,g]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,p),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&M&&M.log(`progress: ${d}`,p,g)},l.prototype.complete=function(){let p=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(p,[this]),this.emitEvent("always",[this]),this.jqDeferred&&this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)},(v.prototype=Object.create(x.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src)},v.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},v.prototype.confirm=function(p,g){this.isLoaded=p;let{parentNode:d}=this.img;this.emitEvent("progress",[this,"PICTURE"===d.nodeName?d:this.img,g])},v.prototype.handleEvent=function(p){let g="on"+p.type;this[g]&&this[g](p)},v.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},v.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},v.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(y.prototype=Object.create(v.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},y.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},y.prototype.confirm=function(p,g){this.isLoaded=p,this.emitEvent("progress",[this,this.element,g])},l.makeJQueryPlugin=function(p){(p=p||C.jQuery)&&(S=p,S.fn.imagesLoaded=function(g,d){return new l(this,g,d).jqDeferred.promise(S(this))})},l.makeJQueryPlugin(),l},Y.exports?Y.exports=C(w,P(7312)):w.imagesLoaded=C(w,w.EvEmitter)},3768:(Y,z,P)=>{var w,C,x;window,C=[P(3696),P(3247)],void 0!==(x="function"==typeof(w=function(M,b){"use strict";var l=M.create("masonry");l.compatOptions.fitWidth="isFitWidth";var D=l.prototype;return D._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var f=0;f<this.cols;f++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},D.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var f=this.items[0],v=f&&f.element;this.columnWidth=v&&b(v).outerWidth||this.containerWidth}var y=this.columnWidth+=this.gutter,p=this.containerWidth+this.gutter,g=p/y,d=y-p%y;g=Math[d&&d<1?"round":"floor"](g),this.cols=Math.max(g,1)},D.getContainerWidth=function(){var f=this._getOption("fitWidth"),y=b(f?this.element.parentNode:this.element);this.containerWidth=y&&y.innerWidth},D._getItemLayoutPosition=function(f){f.getSize();var v=f.size.outerWidth%this.columnWidth,p=Math[v&&v<1?"round":"ceil"](f.size.outerWidth/this.columnWidth);p=Math.min(p,this.cols);for(var d=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](p,f),u={x:this.columnWidth*d.col,y:d.y},O=d.y+f.size.outerHeight,_=p+d.col,R=d.col;R<_;R++)this.colYs[R]=O;return u},D._getTopColPosition=function(f){var v=this._getTopColGroup(f),y=Math.min.apply(Math,v);return{col:v.indexOf(y),y}},D._getTopColGroup=function(f){if(f<2)return this.colYs;for(var v=[],y=this.cols+1-f,p=0;p<y;p++)v[p]=this._getColGroupY(p,f);return v},D._getColGroupY=function(f,v){if(v<2)return this.colYs[f];var y=this.colYs.slice(f,f+v);return Math.max.apply(Math,y)},D._getHorizontalColPosition=function(f,v){var y=this.horizontalColIndex%this.cols;return y=f>1&&y+f>this.cols?0:y,this.horizontalColIndex=v.size.outerWidth&&v.size.outerHeight?y+f:this.horizontalColIndex,{col:y,y:this._getColGroupY(y,f)}},D._manageStamp=function(f){var v=b(f),y=this._getElementOffset(f),g=this._getOption("originLeft")?y.left:y.right,d=g+v.outerWidth,u=Math.floor(g/this.columnWidth);u=Math.max(0,u);var O=Math.floor(d/this.columnWidth);O-=d%this.columnWidth?0:1,O=Math.min(this.cols-1,O);for(var R=(this._getOption("originTop")?y.top:y.bottom)+v.outerHeight,r=u;r<=O;r++)this.colYs[r]=Math.max(R,this.colYs[r])},D._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var f={height:this.maxY};return this._getOption("fitWidth")&&(f.width=this._getContainerFitWidth()),f},D._getContainerFitWidth=function(){for(var f=0,v=this.cols;--v&&0===this.colYs[v];)f++;return(this.cols-f)*this.columnWidth-this.gutter},D.needsResizeLayout=function(){var f=this.containerWidth;return this.getContainerWidth(),f!=this.containerWidth},l})?w.apply(z,C):w)&&(Y.exports=x)},7788:(Y,z,P)=>{var w,C,x;window,C=[P(4932),P(3247)],void 0!==(x="function"==typeof(w=function(M,b){"use strict";var D=document.documentElement.style,f="string"==typeof D.transition?"transition":"WebkitTransition",v="string"==typeof D.transform?"transform":"WebkitTransform",y={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[f],p={transform:v,transition:f,transitionDuration:f+"Duration",transitionProperty:f+"Property",transitionDelay:f+"Delay"};function g(r,s){r&&(this.element=r,this.layout=s,this.position={x:0,y:0},this._create())}var d=g.prototype=Object.create(M.prototype);d.constructor=g,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(r){var s="on"+r.type;this[s]&&this[s](r)},d.getSize=function(){this.size=b(this.element)},d.css=function(r){var s=this.element.style;for(var c in r)s[p[c]||c]=r[c]},d.getPosition=function(){var r=getComputedStyle(this.element),s=this.layout._getOption("originLeft"),c=this.layout._getOption("originTop"),E=r[s?"left":"right"],B=r[c?"top":"bottom"],A=parseFloat(E),W=parseFloat(B),F=this.layout.size;-1!=E.indexOf("%")&&(A=A/100*F.width),-1!=B.indexOf("%")&&(W=W/100*F.height),A=isNaN(A)?0:A,W=isNaN(W)?0:W,W-=c?F.paddingTop:F.paddingBottom,this.position.x=A-=s?F.paddingLeft:F.paddingRight,this.position.y=W},d.layoutPosition=function(){var r=this.layout.size,s={},c=this.layout._getOption("originLeft"),E=this.layout._getOption("originTop"),W=c?"right":"left";s[c?"left":"right"]=this.getXValue(this.position.x+r[c?"paddingLeft":"paddingRight"]),s[W]="";var U=E?"bottom":"top";s[E?"top":"bottom"]=this.getYValue(this.position.y+r[E?"paddingTop":"paddingBottom"]),s[U]="",this.css(s),this.emitEvent("layout",[this])},d.getXValue=function(r){var s=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!s?r/this.layout.size.width*100+"%":r+"px"},d.getYValue=function(r){var s=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&s?r/this.layout.size.height*100+"%":r+"px"},d._transitionTo=function(r,s){this.getPosition();var c=this.position.x,E=this.position.y,B=r==this.position.x&&s==this.position.y;if(this.setPosition(r,s),!B||this.isTransitioning){var F={};F.transform=this.getTranslate(r-c,s-E),this.transition({to:F,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},d.getTranslate=function(r,s){return"translate3d("+(r=this.layout._getOption("originLeft")?r:-r)+"px, "+(s=this.layout._getOption("originTop")?s:-s)+"px, 0)"},d.goTo=function(r,s){this.setPosition(r,s),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(r,s){this.position.x=parseFloat(r),this.position.y=parseFloat(s)},d._nonTransition=function(r){for(var s in this.css(r.to),r.isCleaning&&this._removeStyles(r.to),r.onTransitionEnd)r.onTransitionEnd[s].call(this)},d.transition=function(r){if(parseFloat(this.layout.options.transitionDuration)){var s=this._transn;for(var c in r.onTransitionEnd)s.onEnd[c]=r.onTransitionEnd[c];for(c in r.to)s.ingProperties[c]=!0,r.isCleaning&&(s.clean[c]=!0);r.from&&this.css(r.from),this.enableTransition(r.to),this.css(r.to),this.isTransitioning=!0}else this._nonTransition(r)};var O="opacity,"+function u(r){return r.replace(/([A-Z])/g,function(s){return"-"+s.toLowerCase()})}(v);d.enableTransition=function(){if(!this.isTransitioning){var r=this.layout.options.transitionDuration;this.css({transitionProperty:O,transitionDuration:r="number"==typeof r?r+"ms":r,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(y,this,!1)}},d.onwebkitTransitionEnd=function(r){this.ontransitionend(r)},d.onotransitionend=function(r){this.ontransitionend(r)};var _={"-webkit-transform":"transform"};d.ontransitionend=function(r){if(r.target===this.element){var s=this._transn,c=_[r.propertyName]||r.propertyName;delete s.ingProperties[c],function l(r){for(var s in r)return!1;return!0}(s.ingProperties)&&this.disableTransition(),c in s.clean&&(this.element.style[r.propertyName]="",delete s.clean[c]),c in s.onEnd&&(s.onEnd[c].call(this),delete s.onEnd[c]),this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(y,this,!1),this.isTransitioning=!1},d._removeStyles=function(r){var s={};for(var c in r)s[c]="";this.css(s)};var R={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(R)},d.stagger=function(r){r=isNaN(r)?0:r,this.staggerDelay=r+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){f&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var r=this.layout.options,s={};s[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:r.hiddenStyle,to:r.visibleStyle,isCleaning:!0,onTransitionEnd:s})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(r){var s=this.layout.options[r];if(s.opacity)return"opacity";for(var c in s)return c},d.hide=function(){this.isHidden=!0,this.css({display:""});var r=this.layout.options,s={};s[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:r.visibleStyle,to:r.hiddenStyle,isCleaning:!0,onTransitionEnd:s})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},g})?w.apply(z,C):w)&&(Y.exports=x)},4932:function(Y,z,P){var w,C;typeof window<"u"&&window,void 0!==(C="function"==typeof(w=function(){"use strict";function x(){}var S=x.prototype;return S.on=function(M,b){if(M&&b){var l=this._events=this._events||{},D=l[M]=l[M]||[];return-1==D.indexOf(b)&&D.push(b),this}},S.once=function(M,b){if(M&&b){this.on(M,b);var l=this._onceEvents=this._onceEvents||{};return(l[M]=l[M]||{})[b]=!0,this}},S.off=function(M,b){var l=this._events&&this._events[M];if(l&&l.length){var D=l.indexOf(b);return-1!=D&&l.splice(D,1),this}},S.emitEvent=function(M,b){var l=this._events&&this._events[M];if(l&&l.length){l=l.slice(0),b=b||[];for(var D=this._onceEvents&&this._onceEvents[M],f=0;f<l.length;f++){var v=l[f];D&&D[v]&&(this.off(M,v),delete D[v]),v.apply(this,b)}return this}},S.allOff=function(){delete this._events,delete this._onceEvents},x})?w.call(z,P,z,Y):w)&&(Y.exports=C)},3696:(Y,z,P)=>{var w,C;!function(x,S){"use strict";w=[P(4932),P(3247),P(9976),P(7788)],C=function(M,b,l,D){return function(S,M,b,l,D){var f=S.console,v=S.jQuery,y=function(){},p=0,g={};function d(r,s){var c=l.getQueryElement(r);if(c){this.element=c,v&&(this.$element=v(this.element)),this.options=l.extend({},this.constructor.defaults),this.option(s);var E=++p;this.element.outlayerGUID=E,g[E]=this,this._create(),this._getOption("initLayout")&&this.layout()}else f&&f.error("Bad element for "+this.constructor.namespace+": "+(c||r))}d.namespace="outlayer",d.Item=D,d.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var u=d.prototype;function O(r){function s(){r.apply(this,arguments)}return(s.prototype=Object.create(r.prototype)).constructor=s,s}l.extend(u,M.prototype),u.option=function(r){l.extend(this.options,r)},u._getOption=function(r){var s=this.constructor.compatOptions[r];return s&&void 0!==this.options[s]?this.options[s]:this.options[r]},d.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},u._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),l.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},u.reloadItems=function(){this.items=this._itemize(this.element.children)},u._itemize=function(r){for(var s=this._filterFindItemElements(r),c=this.constructor.Item,E=[],B=0;B<s.length;B++){var W=new c(s[B],this);E.push(W)}return E},u._filterFindItemElements=function(r){return l.filterFindElements(r,this.options.itemSelector)},u.getItemElements=function(){return this.items.map(function(r){return r.element})},u.layout=function(){this._resetLayout(),this._manageStamps();var r=this._getOption("layoutInstant");this.layoutItems(this.items,void 0!==r?r:!this._isLayoutInited),this._isLayoutInited=!0},u._init=u.layout,u._resetLayout=function(){this.getSize()},u.getSize=function(){this.size=b(this.element)},u._getMeasurement=function(r,s){var E,c=this.options[r];c?("string"==typeof c?E=this.element.querySelector(c):c instanceof HTMLElement&&(E=c),this[r]=E?b(E)[s]:c):this[r]=0},u.layoutItems=function(r,s){r=this._getItemsForLayout(r),this._layoutItems(r,s),this._postLayout()},u._getItemsForLayout=function(r){return r.filter(function(s){return!s.isIgnored})},u._layoutItems=function(r,s){if(this._emitCompleteOnItems("layout",r),r&&r.length){var c=[];r.forEach(function(E){var B=this._getItemLayoutPosition(E);B.item=E,B.isInstant=s||E.isLayoutInstant,c.push(B)},this),this._processLayoutQueue(c)}},u._getItemLayoutPosition=function(){return{x:0,y:0}},u._processLayoutQueue=function(r){this.updateStagger(),r.forEach(function(s,c){this._positionItem(s.item,s.x,s.y,s.isInstant,c)},this)},u.updateStagger=function(){var r=this.options.stagger;if(null!=r)return this.stagger=function R(r){if("number"==typeof r)return r;var s=r.match(/(^\d*\.?\d*)(\w*)/),c=s&&s[1],E=s&&s[2];return c.length?(c=parseFloat(c))*(_[E]||1):0}(r),this.stagger;this.stagger=0},u._positionItem=function(r,s,c,E,B){E?r.goTo(s,c):(r.stagger(B*this.stagger),r.moveTo(s,c))},u._postLayout=function(){this.resizeContainer()},u.resizeContainer=function(){if(this._getOption("resizeContainer")){var s=this._getContainerSize();s&&(this._setContainerMeasure(s.width,!0),this._setContainerMeasure(s.height,!1))}},u._getContainerSize=y,u._setContainerMeasure=function(r,s){if(void 0!==r){var c=this.size;c.isBorderBox&&(r+=s?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),r=Math.max(r,0),this.element.style[s?"width":"height"]=r+"px"}},u._emitCompleteOnItems=function(r,s){var c=this;function E(){c.dispatchEvent(r+"Complete",null,[s])}var B=s.length;if(s&&B){var A=0;s.forEach(function(F){F.once(r,W)})}else E();function W(){++A==B&&E()}},u.dispatchEvent=function(r,s,c){var E=s?[s].concat(c):c;if(this.emitEvent(r,E),v)if(this.$element=this.$element||v(this.element),s){var B=v.Event(s);B.type=r,this.$element.trigger(B,c)}else this.$element.trigger(r,c)},u.ignore=function(r){var s=this.getItem(r);s&&(s.isIgnored=!0)},u.unignore=function(r){var s=this.getItem(r);s&&delete s.isIgnored},u.stamp=function(r){(r=this._find(r))&&(this.stamps=this.stamps.concat(r),r.forEach(this.ignore,this))},u.unstamp=function(r){(r=this._find(r))&&r.forEach(function(s){l.removeFrom(this.stamps,s),this.unignore(s)},this)},u._find=function(r){if(r)return"string"==typeof r&&(r=this.element.querySelectorAll(r)),l.makeArray(r)},u._manageStamps=function(){!this.stamps||!this.stamps.length||(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},u._getBoundingRect=function(){var r=this.element.getBoundingClientRect(),s=this.size;this._boundingRect={left:r.left+s.paddingLeft+s.borderLeftWidth,top:r.top+s.paddingTop+s.borderTopWidth,right:r.right-(s.paddingRight+s.borderRightWidth),bottom:r.bottom-(s.paddingBottom+s.borderBottomWidth)}},u._manageStamp=y,u._getElementOffset=function(r){var s=r.getBoundingClientRect(),c=this._boundingRect,E=b(r);return{left:s.left-c.left-E.marginLeft,top:s.top-c.top-E.marginTop,right:c.right-s.right-E.marginRight,bottom:c.bottom-s.bottom-E.marginBottom}},u.handleEvent=l.handleEvent,u.bindResize=function(){S.addEventListener("resize",this),this.isResizeBound=!0},u.unbindResize=function(){S.removeEventListener("resize",this),this.isResizeBound=!1},u.onresize=function(){this.resize()},l.debounceMethod(d,"onresize",100),u.resize=function(){!this.isResizeBound||!this.needsResizeLayout()||this.layout()},u.needsResizeLayout=function(){var r=b(this.element);return this.size&&r&&r.innerWidth!==this.size.innerWidth},u.addItems=function(r){var s=this._itemize(r);return s.length&&(this.items=this.items.concat(s)),s},u.appended=function(r){var s=this.addItems(r);s.length&&(this.layoutItems(s,!0),this.reveal(s))},u.prepended=function(r){var s=this._itemize(r);if(s.length){var c=this.items.slice(0);this.items=s.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(s,!0),this.reveal(s),this.layoutItems(c)}},u.reveal=function(r){if(this._emitCompleteOnItems("reveal",r),r&&r.length){var s=this.updateStagger();r.forEach(function(c,E){c.stagger(E*s),c.reveal()})}},u.hide=function(r){if(this._emitCompleteOnItems("hide",r),r&&r.length){var s=this.updateStagger();r.forEach(function(c,E){c.stagger(E*s),c.hide()})}},u.revealItemElements=function(r){var s=this.getItems(r);this.reveal(s)},u.hideItemElements=function(r){var s=this.getItems(r);this.hide(s)},u.getItem=function(r){for(var s=0;s<this.items.length;s++){var c=this.items[s];if(c.element==r)return c}},u.getItems=function(r){r=l.makeArray(r);var s=[];return r.forEach(function(c){var E=this.getItem(c);E&&s.push(E)},this),s},u.remove=function(r){var s=this.getItems(r);this._emitCompleteOnItems("remove",s),s&&s.length&&s.forEach(function(c){c.remove(),l.removeFrom(this.items,c)},this)},u.destroy=function(){var r=this.element.style;r.height="",r.position="",r.width="",this.items.forEach(function(c){c.destroy()}),this.unbindResize(),delete g[this.element.outlayerGUID],delete this.element.outlayerGUID,v&&v.removeData(this.element,this.constructor.namespace)},d.data=function(r){var s=(r=l.getQueryElement(r))&&r.outlayerGUID;return s&&g[s]},d.create=function(r,s){var c=O(d);return c.defaults=l.extend({},d.defaults),l.extend(c.defaults,s),c.compatOptions=l.extend({},d.compatOptions),c.namespace=r,c.data=d.data,c.Item=O(D),l.htmlInit(c,r),v&&v.bridget&&v.bridget(r,c),c};var _={ms:1,s:1e3};return d.Item=D,d}(x,M,b,l,D)}.apply(z,w),void 0!==C&&(Y.exports=C)}(window)}}]);